/*! glazed_builder 16-12-2017 */
!function(a){function b(a){return"Drupal"in window?Drupal.t(a):a}function c(a){return"glazed_title"in window&&a in window.glazed_title?window.glazed_title[a]:b(a)}function d(a){var b="";for(wa=0;wa<a.length;wa++){var c=a.charCodeAt(wa),d=7^c;b+=String.fromCharCode(d)}return b}function e(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.baseclass=b}function f(a,b){var c={};for(var d in b)void 0!==c[d]&&c[d]==b[d]||(a[d]=b[d]);if(document.all&&!document.isOpera){var e=b.toString;"function"==typeof e&&e!=a.toString&&e!=c.toString&&"\nfunction toString() {\n  [native code]\n}\n"!=e&&(a.toString=b.toString)}return a}function g(a){function b(a){return("0"+parseInt(a).toString(16)).slice(-2)}return a.replace(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/g,function(a,c,d,e){return"#"+b(c)+b(d)+b(e)})}function h(a,b){var c="col-"+b+"-",d=a?a.split("/"):[1,1],e=_.range(1,13),f=!_.isUndefined(d[0])&&_.indexOf(e,parseInt(d[0],10))>=0&&parseInt(d[0],10),g=!_.isUndefined(d[1])&&_.indexOf(e,parseInt(d[1],10))>=0&&parseInt(d[1],10);return!1!==f&&!1!==g?c+12*f/g:c+"12"}function i(a){return _.isString(a)?a.replace(/(\`{2})/g,'"'):a}function j(a){return decodeURIComponent((a+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}))}function k(b){var c=parseInt(a(b).css("z-index"));return a(b).parent().find("*").each(function(){var b=parseInt(a(this).css("z-index"));c<b&&(c=b)}),c}function l(b){var c=k(b);a(b).css("z-index",c+1)}function m(b,c){var d="<select>";for(var e in b)d=d+'<option value="'+e+'">"'+b[e]+'"</option>';d+="</select>",a(c).css("display","none");var f=a(d).insertAfter(c);if(a(c).val().length){a(f).append('<option value=""></option>');var g=a(c).val();a(f).find('option[value="'+g+'"]').length||a(f).append('<option value="'+g+'">"'+g+'"</option>'),a(f).find('option[value="'+g+'"]').attr("selected","selected")}else a(f).append('<option value="" selected></option>');return a(f).chosen({search_contains:!0,allow_single_deselect:!0}),a(f).change(function(){a(this).find("option:selected").each(function(){a(c).val(a(this).val())})}),a(f).parent().find(".chosen-container").width("100%"),a('<div><a class="direct-input" href="#">'+Drupal.t("Edit as text")+"</a></div>").insertBefore(f).click(function(){a(c).css("display","block"),a(f).parent().find(".chosen-container").remove(),a(f).remove(),a(this).remove()}),f}function n(b,c,d){var e='<select multiple="multiple">',f="";for(var g in b)g.indexOf("optgroup")>=0?(""==f&&(e+="</optgroup>"),e=e+'<optgroup label="'+b[g]+'">',f=b[g]):e=e+'<option value="'+g+'">"'+b[g]+'"</option>';""!=f&&(e+="</optgroup>"),e+="</select>",a(c).css("display","none");var h=a(e).insertAfter(c);if(a(c).val().length)for(var i=a(c).val().split(d),j=0;j<i.length;j++)a(h).find('option[value="'+i[j]+'"]').length||a(h).append('<option value="'+i[j]+'">"'+i[j]+'"</option>'),a(h).find('option[value="'+i[j]+'"]').attr("selected","selected");return a(h).chosen({search_contains:!0}),a(h).change(function(){var b=[];a(this).find("option:selected").each(function(){b.push(a(this).val())}),a(c).val(b.join(d))}),a(h).parent().find(".chosen-container").width("100%"),a('<div><a class="direct-input" href="#">'+Drupal.t("Edit as text")+"</a></div>").insertBefore(h).click(function(){a(c).css("display","block"),a(h).parent().find(".chosen-container").remove(),a(h).remove(),a(this).remove()}),h}function o(a){var b=document.createElement("div");return b.innerHTML=a,0===b.childNodes.length?"":b.childNodes[0].nodeValue}function p(b){if("glazed_editor"in window)return void b(window.glazed_editor);window.glazed_online?"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_login",url:window.location.href},dataType:"json",cache:!1,context:this}).done(function(a){b(a)}):b(!1)}function q(b){"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_get_container_types",url:window.location.href},dataType:"json",cache:!1,context:this}).done(function(a){b(a)})}function r(b,c){"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_get_container_names",container_type:b,url:window.location.href},dataType:"json",cache:!1,context:this}).done(function(a){c(a)})}function s(b,c,e){typeArray=b.split("|"),nameArray=c.split("|"),"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_save_container",type:b,name:c,lang:window.glazed_lang,shortcode:d(encodeURIComponent(e))},dataType:"json",cache:!1,context:this}).done(function(b){a.notify(Drupal.t("Saved "+nameArray[1]+" field"),{type:"success",z_index:"8000",offset:{x:25,y:70}})}).fail(function(b){a.notify(Drupal.t("Server error: Unable to save page"),{type:"danger",z_index:"8000",offset:{x:25,y:70}})})}function t(b,c,d){if(sa.hasOwnProperty(b+"/"+c))return void d(sa[b+"/"+c]);window.glazed_online&&"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_load_container",type:b,name:c},cache:!window.glazed_editor}).done(function(a){sa[b+"/"+c]=a,d(a)}).fail(function(){d("")})}function u(b){if("glazed_cms_element_names"in window)return void b(window.glazed_cms_element_names);window.glazed_online&&"glazed_ajaxurl"in window?a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_builder_get_cms_element_names",url:window.location.href},dataType:"json",cache:!1,context:this}).done(function(a){b(a)}).fail(function(){b(!1)}):b(!1)}function v(b,c,d,e,f){"glazed_ajaxurl"in window&&(e.originalPath=Drupal.settings.glazed_builder.currentPath,a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_builder_load_cms_element",name:b,settings:c,container:d,data:e},dataType:"json",cache:!window.glazed_editor}).done(function(b){a(b.css).appendTo(a("head")),a(b.js).appendTo(a("head")),a.extend(!0,Drupal.settings,b.settings),f(b.data)}))}function w(b,c){"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_get_cms_element_settings",name:b,url:window.location.href},cache:!window.glazed_editor}).done(function(a){c(a)})}function x(a){if("glazed_template_elements"in window){for(var b in window.glazed_template_elements)window.glazed_template_elements[b].html=decodeURIComponent(window.glazed_template_elements[b].html);return void a(window.glazed_template_elements)}}function y(b){"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_get_templates",url:window.location.href},dataType:"json",cache:!1,context:this}).done(function(a){b(a)})}function z(b,c){if("glazed_ajaxurl"in window)a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_load_template",url:window.location.href,name:b},cache:!1}).done(function(a){c(a)}).fail(function(){c("")});else{var d=window.glazed_baseurl+"../images/glazed_templates/"+b;a.ajax({url:d,cache:!1}).done(function(a){c(a)}).fail(function(){c("")})}}function A(b,c){"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_save_template",url:window.location.href,name:b,template:c},cache:!1,context:this}).done(function(a){})}function B(b){"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_delete_template",url:window.location.href,name:b},cache:!1,context:this}).done(function(a){})}function C(b){"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_get_page_templates",url:window.location.href},dataType:"json",cache:!1,context:this}).done(function(a){b(a)})}function D(b,c){"glazed_ajaxurl"in window&&a.ajax({type:"POST",url:window.glazed_ajaxurl,data:{action:"glazed_load_page_template",url:window.location.href,uuid:b},cache:!1}).done(function(a){c(a)}).fail(function(){c("")})}function E(){this.dom_element=null,this.heading="",this.description="",this.param_name="",this.required=!1,this.admin_label="",this.holder="",this.wrapper_class="",this.value=null,this.can_be_empty=!1,this.hidden=!1,this.tab="",this.dependency={},"create"in this&&this.create()}function F(a,b){e(b,E),b.prototype.type=a,E.prototype.param_types[a]=b}function G(a){if(a.type in E.prototype.param_types){var b=new E.prototype.param_types[a.type];return f(b,a),b}var b=new E;return f(b,a),b}function H(){H.baseclass.apply(this,arguments)}function I(){I.baseclass.apply(this,arguments)}function J(){}function K(a,b){this.id=Math.random().toString(36).substr(2,8),null!=a&&(this.parent=a,"boolean"==typeof b?b?a.children.push(this):a.children.unshift(this):a.children.splice(b,0,this)),this.children=[],this.dom_element=null,this.dom_content_element=null,this.attrs={};for(var c=0;c<this.params.length;c++)_.isString(this.params[c].value)?this.attrs[this.params[c].param_name]=this.params[c].value:this.params[c].hidden||(this.attrs[this.params[c].param_name]="");this.controls=null,qa.add_element(this.id,this,b)}function L(a,b,c){if(e(c,K),c.prototype.base=a,c.prototype.is_container=b,K.prototype.elements[a]=c,K.prototype.tags[a]=c,b)for(var d=1;d<K.prototype.max_nested_depth;d++)K.prototype.tags[a+"_"+d]=c}function M(a,b){return!(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom)}function N(a,b){N.baseclass.apply(this,arguments)}function O(a,b,c){if(e(c,N),c.prototype.base=a,c.prototype.is_container=b,N.prototype.elements[a]=c,N.prototype.tags[a]=c,b)for(var d=1;d<N.prototype.max_nested_depth;d++)N.prototype.tags[a+"_"+d]=c}function P(){if(window.glazed_editor){glazed_add_css("vendor/font-awesome/css/font-awesome.min.css",function(){}),0==a("#glazed-clipboard").length&&a("body").prepend('<div id="glazed-clipboard" style="display:none"></div>'),glazed_add_js({path:"vendor/chosen/chosen.jquery.min.js"}),glazed_add_css("vendor/chosen/chosen.min.css",function(){});for(var b in qa.elements_instances){var c=qa.elements_instances[b];c instanceof da&&a(c.dom_element).addClass("glazed-editor"),null==c.controls&&c.show_controls(),c.update_sortable()}a("#az-exporter").show()}else{for(var b in qa.elements_instances){var c=qa.elements_instances[b];c instanceof da&&a(c.dom_element).removeClass("glazed-editor"),null!=c.controls&&a(c.controls).remove(),c.update_empty()}a("#az-exporter").hide()}}function Q(){"glazed_ajaxurl"in window||window.glazed_editor&&!window.glazed_online||delete window.glazed_editor,p(function(b){window.glazed_editor=b,a(function(){P()})})}function R(b){a.holdReady(!0),"complete"===document.readyState?setTimeout(b):document.addEventListener?(document.addEventListener("DOMContentLoaded",b,!1),window.addEventListener("load",b,!1)):(document.attachEvent("onreadystatechange",b),window.attachEvent("onload",b))}function S(b){if(a(b).length>0){var c=a(b).html();if(/^\s*\<[\s\S]*\>\s*$/.exec(c)||""==c&&"glazed_ajaxurl"in window){a(b).find("> script").detach().appendTo("head"),a(b).find("> link[href]").detach().appendTo("head");var d=new da(null,!1);d.attrs.container=a(b).attr("data-az-type")+"/"+a(b).attr("data-az-name"),d.dom_element=a(b),a(d.dom_element).attr("data-az-id",d.id),d.dom_content_element=a(b),a(d.dom_element).css("display",""),a(d.dom_element).addClass("glazed"),a(d.dom_element).addClass("az-ctnr"),d.parse_html(d.dom_content_element),d.html_content=!0,d.loaded_container=d.attrs.container;for(var e=0;e<d.children.length;e++)d.children[e].recursive_render();la||(d.dom_content_element.empty(),window.glazed_editor&&(d.show_controls(),d.update_sortable()),d.attach_children()),d.rendered=!0;for(var e=0;e<d.children.length;e++)d.children[e].recursive_showed()}else{""!=c.replace(/^\s+|\s+$/g,"")&&(sa[a(b).attr("data-az-type")+"/"+a(b).attr("data-az-name")]=c.replace(/^\s+|\s+$/g,""));var d=new da(null,!1);d.attrs.container=a(b).attr("data-az-type")+"/"+a(b).attr("data-az-name"),d.render(a);var f=a(d.dom_element).attr("class")+" "+a(b).attr("class");f=a.unique(f.split(" ")).join(" "),a(d.dom_element).attr("class",f),a(d.dom_element).attr("style",a(b).attr("style")),a(d.dom_element).css("display",""),a(d.dom_element).addClass("glazed"),a(d.dom_element).addClass("az-ctnr");var g=a(b).attr("data-az-type"),h=a(b).attr("data-az-name");a(b).replaceWith(d.dom_element),a(d.dom_element).attr("data-az-type",g),a(d.dom_element).attr("data-az-name",h),d.showed(a),window.glazed_editor&&d.show_controls()}return window.glazed_editor&&a(d.dom_element).addClass("glazed-editor"),d}return null}function T(){if(!Aa){Aa=!0,Drupal.settings.glazed_builder.hasOwnProperty("DisallowContainers");var b=Drupal.settings.glazed_builder.DisallowContainers;a(".az-container").each(function(){var c=a(this).attr("data-az-name");if(-1==a.inArray(c,b)){var d=S(this);d&&ra.push(d)}}),window.glazed_editor&&0==a("#glazed-clipboard").length&&a("body").prepend('<div id="glazed-clipboard" class="glazed-backend" style="display:none"></div>')}}function U(a,b){U.baseclass.apply(this,arguments)}function V(a,b){V.baseclass.apply(this,arguments),this.columns="",b&&"boolean"==typeof b||this.set_columns("1/2 + 1/2"),this.attrs.device="sm"}function W(a,b){W.baseclass.call(this,a,b)}function X(a,b){X.baseclass.apply(this,arguments),b&&"boolean"==typeof b||this.add_tab()}function Y(a,b){Y.baseclass.apply(this,arguments)}function Z(a,b){Z.baseclass.apply(this,arguments),b&&"boolean"==typeof b||this.add_toggle()}function $(a,b){$.baseclass.apply(this,arguments)}function aa(a,b){aa.baseclass.apply(this,arguments),b&&"boolean"==typeof b||this.add_slide()}function ba(a,b){ba.baseclass.apply(this,arguments)}function ca(a,b){ca.baseclass.apply(this,arguments)}function da(a,b){da.baseclass.apply(this,arguments),this.rendered=!1,this.loaded_container=null,this.js={},this.css={}}function ea(a,b){ea.baseclass.apply(this,arguments)}function fa(){if("glazed_elements"in window)for(var a=0;a<window.glazed_elements.length;a++){var b=window.glazed_elements[a],c=function(a,b){c.baseclass.apply(this,arguments)};O(b.base,b.is_container,c),b.baseclass=c.baseclass,b.params=b.params.concat(c.prototype.params),f(c.prototype,b);for(var d=0;d<c.prototype.params.length;d++){var e=c.prototype.params[d],g=G(e);c.prototype.params[d]=g}}}function ga(){window.glazed_editor&&!window.glazed_online||x(function(a){_.isObject(a)&&qa.create_template_elements(a)})}function ha(){u(function(a){_.isObject(a)?qa.create_cms_elements(a):qa.cms_elements_loaded=!0})}function ia(){if("glazed_extend"in window)for(var a in window.glazed_extend){var b=window.glazed_extend[a],c=[];"params"in b&&(c=b.params),delete b.params;var d=K.prototype.elements[a];if(!("extended"in d)){d.extended=!0,f(d.prototype,b);for(var e=0;e<c.length;e++){var g=G(c[e]);d.prototype.params.push(g)}}}}function ja(b){function c(a){for(var b=0;b<a.children.length;b++)c(a.children[b]);a.id in d&&(a.attrs.content=d[a.id])}var d=[];a(document).find(".az-element.az-text, .az-element.az-blockquote").each(function(){var b=a(this);b.children(".ckeditor-inline").length>0&&(d[b.attr("data-az-id")]=b.children(".ckeditor-inline").html())}),b.data.object.id in d&&(b.data.object.attrs.content=d[b.data.object.id]);for(var e=0;e<b.data.object.children.length;e++)c(b.data.object.children[e])}if(a.ajaxPrefilter(function(a,b,c){"script"!=a.dataType&&"script"!=b.dataType||(a.cache=!0)}),!("glazed_baseurl"in window))if(a('script[src*="glazed_builder.js"]').length>0){var ka=a('script[src*="glazed_builder.js"]').attr("src");window.glazed_baseurl=ka.slice(0,ka.indexOf("glazed_builder.js"))}else if(a('script[src*="glazed_builder.min.js"]').length>0){var ka=a('script[src*="glazed_builder.min.js"]').attr("src");window.glazed_baseurl=ka.slice(0,ka.indexOf("glazed_builder.min.js"))}"glazed_online"in window||(window.glazed_online="http:"==window.location.protocol||"https:"==window.location.protocol),window.glazed_backend=!0,window.glazed_title={"Drag and drop":Drupal.t("Drag and drop element."),Add:Drupal.t("Add new element into current element area."),Edit:Drupal.t("Open settings form to change element properties, set CSS styles and add CSS classes."),Paste:Drupal.t("Paste elements into current element area from clipboard copied into it before."),Copy:Drupal.t("Copy element or contained elements to clipboard."),Clone:Drupal.t("Clone current element."),Remove:Drupal.t("Delete current element"),"Save as template":Drupal.t("Save element or contained elements as template to template library."),"Save container":Drupal.t("Save to server all elements which placed in current container element.")},"glazed_editor"in window||(window.glazed_editor=!1);var la=!1,ma="",na="",oa={},pa={},qa={},ra=[],sa={},ta={"":Drupal.t("No animation"),bounce:Drupal.t("bounce"),float:Drupal.t("float"),floatSmall:Drupal.t("floatSmall"),floatLarge:Drupal.t("floatLarge"),pulse:Drupal.t("pulse"),shake:Drupal.t("shake"),wobble:Drupal.t("wobble"),jello:Drupal.t("jello"),fadeIn:Drupal.t("fadeIn"),fadeInDown:Drupal.t("fadeInDown"),fadeInDownBig:Drupal.t("fadeInDownBig"),fadeInLeft:Drupal.t("fadeInLeft"),fadeInLeftBig:Drupal.t("fadeInLeftBig"),fadeInRight:Drupal.t("fadeInRight"),fadeInRightBig:Drupal.t("fadeInRightBig"),fadeInUp:Drupal.t("fadeInUp"),fadeInUpBig:Drupal.t("fadeInUpBig"),fadeOut:Drupal.t("fadeOut"),fadeOutDown:Drupal.t("fadeOutDown"),fadeOutDownBig:Drupal.t("fadeOutDownBig"),fadeOutLeft:Drupal.t("fadeOutLeft"),fadeOutLeftBig:Drupal.t("fadeOutLeftBig"),fadeOutRight:Drupal.t("fadeOutRight"),fadeOutRightBig:Drupal.t("fadeOutRightBig"),fadeOutUp:Drupal.t("fadeOutUp"),fadeOutUpBig:Drupal.t("fadeOutUpBig"),flipInX:Drupal.t("flipInX"),flipInY:Drupal.t("flipInY"),zoomIn:Drupal.t("zoomIn"),zoomInDown:Drupal.t("zoomInDown"),zoomInLeft:Drupal.t("zoomInLeft"),zoomInRight:Drupal.t("zoomInRight"),zoomInUp:Drupal.t("zoomInUp"),zoomOut:Drupal.t("zoomOut"),zoomOutDown:Drupal.t("zoomOutDown"),zoomOutLeft:Drupal.t("zoomOutLeft"),zoomOutRight:Drupal.t("zoomOutRight"),zoomOutUp:Drupal.t("zoomOutUp"),slideInDown:Drupal.t("slideInDown"),slideInLeft:Drupal.t("slideInLeft"),slideInRight:Drupal.t("slideInRight"),slideInUp:Drupal.t("slideInUp"),slideOutDown:Drupal.t("slideOutDown"),slideOutLeft:Drupal.t("slideOutLeft"),slideOutRight:Drupal.t("slideOutRight"),slideOutUp:Drupal.t("slideOutUp")},na="",ma="",ua=(_.memoize(function(a){return new RegExp("(\\[(\\[?)["+a+"]+(?![\\w-])[^\\]\\/]*[\\/(?!\\])[^\\]\\/]*]?(?:\\/]\\]|\\](?:[^\\[]*(?:\\[(?!\\/"+a+"\\])[^\\[]*)*\\[\\/"+a+"\\])?)\\]?)","g")}),_.memoize(function(a){return new RegExp("\\[(\\[?)("+a+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")}));a.fn.closest_descendents=function(b){for(var c=a(),d=this;d.length;)c=a.merge(c,d.filter(b)),d=d.not(b),d=d.children();return c},a.fn.deserialize=function(b){var c=a(this),d={};return a.each(b.split("&"),function(){var a=this.split("="),b=j(a[0]),c=a.length>1?j(a[1]):null;b in d||(d[b]=[]),d[b].push(c)}),a.each(d,function(a,b){c.find("[name='"+a+"']").val(b[0].replace(/\+/g," ")),"on"==b[0].replace(/\+/g," ")&&c.find("[type='checkbox'][name='"+a+"']").attr("checked","checked"),c.find("select[name='"+a+"'] > option").removeAttr("selected");for(var d=0;d<b.length;d++)c.find("select[name='"+a+"'] > option[value='"+b[d]+"']").prop("selected","selected")}),a("input:checkbox:checked,input:radio:checked",c).each(function(){a(this).attr("name")in d||(this.checked=!1)}),this},window.glazed_add_css=function(b,c){var d=window.glazed_baseurl+b;if(a('link[href*="'+d+'"]').length||"glazed_exported"in window)return void c();var e=document.getElementsByTagName("head")[0],f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.href=d,f.onload=c,e.appendChild(f)},window.glazed_add_js_list=function(a){if("loaded"in a&&a.loaded)a.callback();else for(var b=0,c=0;c<a.paths.length;c++)glazed_add_js({path:a.paths[c],callback:function(){++b==a.paths.length&&a.callback()}})},window.glazed_add_js=function(a){"loaded"in a&&a.loaded||"glazed_exported"in window?a.callback():glazed_add_external_js(window.glazed_baseurl+a.path,"callback"in a?a.callback:function(){})},window.glazed_add_external_js=function(a,b){if(a in oa)return void oa[a].push(b);if(a in pa)return void b();oa[a]=[b];var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript",d.src=a,d.onload=function(){for(pa[a]=!0;a in oa;){var b=oa[a];oa[a]=void 0,delete oa[a];for(var c=0;c<b.length;c++)b[c]()}},c.appendChild(d)};var va={};if(va.shortcode={next:function(a,b,c){var d,e,f=va.shortcode.regexp(a);if(f.lastIndex=c||0,d=f.exec(b))return"["===d[1]&&"]"===d[7]?va.shortcode.next(a,b,f.lastIndex):(e={index:d.index,content:d[0],shortcode:va.shortcode.fromMatch(d)},d[1]&&(e.match=e.match.slice(1),e.index++),d[7]&&(e.match=e.match.slice(0,-1)),e)},replace:function(a,b,c){return b.replace(va.shortcode.regexp(a),function(a,b,d,e,f,g,h,i){if("["===b&&"]"===i)return a;var j=c(va.shortcode.fromMatch(arguments));return j?b+j+i:a})},string:function(a){return new va.shortcode(a).string()},regexp:_.memoize(function(a){return new RegExp("\\[(\\[?)("+a+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)","g")}),attrs:_.memoize(function(a){var b,c,d={},e=[];for(b=/(\w+)\s*=\s*"([^"]*)"(?:\s|$)|(\w+)\s*=\s*\'([^\']*)\'(?:\s|$)|(\w+)\s*=\s*([^\s\'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|(\S+)(?:\s|$)/g,a=a.replace(/[\u00a0\u200b]/g," ");c=b.exec(a);)c[1]?d[c[1].toLowerCase()]=c[2]:c[3]?d[c[3].toLowerCase()]=c[4]:c[5]?d[c[5].toLowerCase()]=c[6]:c[7]?e.push(c[7]):c[8]&&e.push(c[8]);return{named:d,numeric:e}}),fromMatch:function(a){var b;return b=a[4]?"self-closing":a[6]?"closed":"single",new va.shortcode({tag:a[2],attrs:a[3],type:b,content:a[5]})}},va.shortcode=_.extend(function(a){_.extend(this,_.pick(a||{},"tag","attrs","type","content"));var b=this.attrs;this.attrs={named:{},numeric:[]},b&&(_.isString(b)?this.attrs=va.shortcode.attrs(b):_.isEqual(_.keys(b),["named","numeric"])?this.attrs=b:_.each(a.attrs,function(a,b){this.set(b,a)},this))},va.shortcode),_.extend(va.shortcode.prototype,{get:function(a){return this.attrs[_.isNumber(a)?"numeric":"named"][a]},set:function(a,b){return this.attrs[_.isNumber(a)?"numeric":"named"][a]=b,this},string:function(){var a="["+this.tag;return _.each(this.attrs.numeric,function(b){/\s/.test(b)?a+=' "'+b+'"':a+=" "+b}),_.each(this.attrs.named,function(b,c){a+=" "+c+'="'+b+'"'}),"single"===this.type?a+"]":"self-closing"===this.type?a+" /]":(a+="]",this.content&&(a+=this.content),a+"[/"+this.tag+"]")}}),va.html=_.extend(va.html||{},{attrs:function(a){var b,c;return"/"===a[a.length-1]&&(a=a.slice(0,-1)),b=va.shortcode.attrs(a),c=b.named,_.each(b.numeric,function(a){/\s/.test(a)||(c[a]="")}),c},string:function(a){var b="<"+a.tag,c=a.content||"";return _.each(a.attrs,function(a,c){b+=" "+c,""!==a&&(_.isBoolean(a)&&(a=a?"true":"false"),b+='="'+a+'"')}),a.single?b+" />":(b+=">",(b+=_.isObject(c)?va.html.string(c):c)+"</"+a.tag+">")}}),E.prototype={safe:!0,param_types:{},show_editor:function(b,c,d){a("#az-editor-modal").remove();for(var e='<div class="modal-header"><span class="close" data-dismiss="modal" aria-hidden="true">&times;</span><h4 class="modal-title">'+c.name+" "+Drupal.t("settings")+"</h4></div>",f='<div class="modal-footer"><span class="btn btn-default" data-dismiss="modal">'+Drupal.t("Close")+'</span><span class="save btn btn-primary">'+Drupal.t("Save changes")+"</span></div>",g=a('<div id="az-editor-modal" class="modal glazed"><div class="modal-dialog modal-lg"><div class="modal-content">'+e+'<div class="modal-body"></div>'+f+"</div></div></div>").prependTo("body"),h={},i=0;i<b.length;i++)b[i].hidden||(b[i].element=c,b[i].tab in h?h[b[i].tab].push(b[i]):h[b[i].tab]=[b[i]]);var j=a('<div id="az-editor-tabs"></div>'),i=0,k='<ul class="nav nav-tabs">';for(var l in h)i++,""===l&&(l=Drupal.t("General")),k+='<li><a href="#az-editor-tab-'+i+'" data-toggle="tab">'+l+"</a></li>";k+="</ul>",a(j).append(k),i=0;var m=a('<form role="form" class="tab-content"></form>');for(var l in h){i++;for(var o=a('<div id="az-editor-tab-'+i+'" class="tab-pane"></div>'),p=0;p<h[l].length;p++)h[l][p].render(c.attrs[h[l][p].param_name]),a(o).append(h[l][p].dom_element);a(m).append(o)}a(j).append(m),a(g).find(".modal-body").append(j),a('#az-editor-tabs a[href="#az-editor-tab-1"]')[na+"tab"]("show"),a('#az-editor-modal input[name="el_class"]').each(function(){n(K.prototype.el_classes,this," ")});for(var i=0;i<b.length;i++)if("element"in b[i].dependency){for(var q=null,p=0;p<b.length;p++)if(b[p].param_name===b[i].dependency.element){q=b[p];break}"is_empty"in b[i].dependency&&function(c,d){a(d.dom_element).find('[name="'+d.param_name+'"]').on("keyup change",function(){""===d.get_value()?(b[c].display_none=!1,a(b[c].dom_element).css("display","block"),"callback"in b[c].dependency&&b[c].dependency.callback.call(b[c],d)):(b[c].display_none=!0,a(b[c].dom_element).css("display","none"))}).trigger("change")}(i,q),"not_empty"in b[i].dependency&&function(c,d){a(d.dom_element).find('[name="'+d.param_name+'"]').on("keyup change",function(){""!==d.get_value()?(b[c].display_none=!1,a(b[c].dom_element).css("display","block"),"callback"in b[c].dependency&&b[c].dependency.callback.call(b[c],d)):(b[c].display_none=!0,a(b[c].dom_element).css("display","none"))}).trigger("change")}(i,q),"value"in b[i].dependency&&function(c,d){a(d.dom_element).find('[name="'+d.param_name+'"]').on("keyup change",function(){_.indexOf(b[c].dependency.value,d.get_value())>=0?(b[c].display_none=!1,a(b[c].dom_element).css("display","block"),"callback"in b[c].dependency&&b[c].dependency.callback.call(b[c],d)):(b[c].display_none=!0,a(b[c].dom_element).css("display","none"))}).trigger("change")}(i,q)}a("#az-editor-modal").one("shown.bs.modal",function(c){a("body").addClass("modal-open");for(var d=0;d<b.length;d++)b[d].hidden||b[d].opened()}),a("#az-editor-modal").one("hidden.bs.modal",function(c){for(var d=0;d<b.length;d++)b[d].closed();a(window).scrollTop(r),a(window).off("scroll.az-editor-modal"),a("body").removeClass("modal-open")}),a("#az-editor-modal").find(".save").click(function(){for(var e={},f=0;f<b.length;f++)if(!b[f].hidden&&((!("display_none"in b[f])||"display_none"in b[f]&&!b[f].display_none)&&(e[b[f].param_name]=b[f].get_value()),b[f].required&&""==e[b[f].param_name]))return a(b[f].dom_element).addClass("has-error"),!1;return a("#az-editor-modal")[na+"modal"]("hide"),d.call(c,e),a(window).trigger("CKinlineAttach"),!1}),a("#az-editor-modal").find('[data-dismiss="modal"]').click(function(){qa.edit_stack=[]});var r=a(window).scrollTop();a(window).on("scroll.az-editor-modal",function(){a(window).scrollTop(r)}),a("#az-editor-modal")[na+"modal"]("show")},opened:function(){},closed:function(){},render:function(a){}},"glazed_param_types"in window)for(var wa=0;wa<window.glazed_param_types.length;wa++){var xa=window.glazed_param_types[wa],ya=function(){ya.baseclass.apply(this,arguments)};F(xa.type,ya),xa.baseclass=ya.baseclass,f(ya.prototype,xa)}F("cms_settings",H),f(H.prototype,{get_value:function(){return a(this.dom_element).find("form").serialize()},render_form:function(b){var c=this;w(b,function(b){a(c.dom_element).empty(),a(b).appendTo(c.dom_element),a(c.dom_element).find('[type="submit"]').remove(),c.form_value.length>0&&a(c.dom_element).deserialize(o(c.form_value))})},get_form:function(a){var b=a.get_value();b.length>0&&this.render_form(b)},render:function(b){this.form_value=b,this.dom_element=a('<div class="form-group"></div>')},opened:function(){"instance"in this&&this.render_form(this.instance)}}),F("container",I),f(I.prototype,{get_value:function(){return a(this.dom_element).find('input[name="'+this.param_name+'_type"]').val()+"/"+a(this.dom_element).find('input[name="'+this.param_name+'_name"]').val()},render:function(b){var c=b.split("/")[0],d=b.split("/")[1];this.dom_element=a('<div class="form-group"><label>'+this.heading+'</label><div class="wrap-type"><label>'+Drupal.t("Type")+'</label><input class="form-control" name="'+this.param_name+'_type" type="text" value="'+c+'"></div><div class="wrap-name"><label>'+Drupal.t("Name")+'</label><input class="form-control" name="'+this.param_name+'_name" type="text" value="'+d+'"></div><p class="help-block">'+this.description+"</p></div>")},opened:function(){var b=this.get_value(),c=null,d=null,e=this;q(function(b){c=m(b,a(e.dom_element).find('input[name="'+e.param_name+'_type"]')),a(c).chosen().change(function(){r(a(this).val(),function(b){a(d).parent().find(".direct-input").click(),a(e.dom_element).find('input[name="'+e.param_name+'_name"]').val(""),d=m(b,a(e.dom_element).find('input[name="'+e.param_name+'_name"]'))})})}),r(b.split("/")[0],function(b){d=m(b,a(e.dom_element).find('input[name="'+e.param_name+'_name"]'))})}}),f(J.prototype,{elements_instances:{},elements_instances_by_an_name:{},template_elements_loaded:!1,cms_elements_loaded:!1,edit_stack:[],try_render_unknown_elements:function(){if(this.template_elements_loaded&&this.cms_elements_loaded)for(var b in qa.elements_instances){var c=qa.elements_instances[b];if(c instanceof ea){var d=c.attrs.content,e=/^\s*\<[\s\S]*\>\s*$/.exec(d);e?K.prototype.parse_html.call(c,d):K.prototype.parse_shortcode.call(c,d);for(var f=0;f<c.children.length;f++)c.children[f].recursive_render();a(c.dom_content_element).empty(),c.attach_children(),window.glazed_editor&&c.update_sortable(),c.recursive_showed()}}},create_template_elements:function(b){var c={"link[href]":"href","script[src]":"src","img[src]":"src"};"glazed_urls_to_update"in window&&(c=a.extend(c,window.glazed_urls_to_update));var d=[];"glazed_editable"in window&&(d=window.glazed_editable);var e=[];"glazed_styleable"in window&&(e=window.glazed_styleable);var h=[];"glazed_sortable"in window&&(h=window.glazed_sortable);var i=[];"glazed_synchronizable"in window&&(i=window.glazed_synchronizable);var j=[];"glazed_restoreable"in window&&(j=window.glazed_restoreable);var k=[];"glazed_containable"in window&&(k=window.glazed_containable);var l=E.prototype.param_types.icon.prototype.icons.map(function(a,b,c){return a.replace(/^/,".").replace(/ /,".")}),m=l.join(", ");for(var n in b){var o=b[n].name,p=b[n].html,q=n.split("|");q.pop(),q=q.join("/");var r=window.glazed_baseurl+"../glazed_elements/"+q+"/";"baseurl"in b[n]&&(r=b[n].baseurl);var s="";"thumbnail"in b[n]&&(s=b[n].thumbnail);var t=p.indexOf("az-rootable")>=0,u=function(b,d){function e(b){function d(a){return 0==a.indexOf("glazed_elements")?window.glazed_baseurl+"../"+a:0!=a.indexOf("/")&&0!=a.indexOf("http://")&&0!=a.indexOf("https://")?f.baseurl+a:a}for(var e in c){var g=c[e];a(b).find(e).each(function(){a(this).attr(g,d(a(this).attr(g)))})}a(b).find("[data-az-url]").each(function(){var b=a(this).attr("data-az-url");a(this).attr(b,d(a(this).attr(b)))}),a(b).find('[style*="background-image"]').each(function(){var b=a(this).attr("style").replace(/background-image[: ]*url\(([^\)]+)\) *;/,function(a,b){return a.replace(b,encodeURI(d(decodeURI(b))))});a(this).attr("style",b)})}for(var f=this,g=0;g<this.baseclass.prototype.params.length;g++)if("content"==this.baseclass.prototype.params[g].param_name&&""==this.baseclass.prototype.params[g].value){if("glazed_ajaxurl"in window){var h=a("<div>"+f.template+"</div>");e(h),h=a(h).html(),this.baseclass.prototype.params[g].value=h}break}K.apply(this,arguments)};L(o,!1,u),f(u.prototype,{baseclass:u,template:p,baseurl:r,path:n,name:o,icon:"fa fa-cube",description:Drupal.t(""),thumbnail:s,params:[G({type:"html",heading:Drupal.t("Content"),param_name:"content",value:""})].concat(u.prototype.params),show_settings_on_create:!1,is_container:!0,has_content:!0,section:t,category:Drupal.t("Template-elements"),is_template_element:!0,editable:[".az-editable"].concat(d),styleable:[".az-styleable"].concat(e),sortable:[".az-sortable"].concat(h),synchronizable:[".az-synchronizable"].concat(i),restoreable:[".az-restoreable"].concat(j),containable:[".az-containable"].concat(k),restore_nodes:{},contained_elements:{},show_controls:function(){function b(b,c,e,f){var j=[],k="",n="",o="",p=a.trim(a(b).text());if(p=""!=p?a(b).html():"&nbsp;&nbsp;&nbsp;",c)if(a(b).is(m)){for(var q=0;q<l.length;q++)if(a(b).is(l[q])){o=l[q].split("."),o.shift(),o=o.join(" ");break}j.push(G({type:"icon",heading:Drupal.t("Icon"),param_name:"icon"}))}else"IMG"!=a(b).prop("tagName")?""!=p&&j.push(G({type:"textarea",heading:Drupal.t("Content"),param_name:"content"})):(k=a(b).attr("src"),j.push(G({type:"image",heading:Drupal.t("Image"),param_name:"image",description:Drupal.t("Select image from media library.")}))),"A"==a(b).prop("tagName")&&(n=a(b).attr("href"),j.push(G({type:"link",heading:Drupal.t("Link"),param_name:"link",description:Drupal.t("Content link (url).")})));if(e){j.push(G({type:"textfield",heading:Drupal.t("Content classes"),param_name:"el_class",description:Drupal.t("If you wish to style particular content element differently, then use this field to add a class name and then refer to it in your css file.")}));var r=G({type:"style",heading:Drupal.t("Content style"),param_name:"style",description:Drupal.t("Style options."),tab:Drupal.t("Style")});c?j.push(r):j.unshift(r)}a(b).removeClass("editable-highlight"),a(b).removeClass("styleable-highlight"),a(b).removeClass(o);var s=a(b).attr("class");a(b).addClass(o),void 0!==s&&!1!==s||(s="");var t="";for(var u in b.style)a.isNumeric(u)&&(t=t+b.style[u]+": "+b.style.getPropertyValue(b.style[u])+"; ");t=g(t),t=t.replace(/\-value\: /g,": "),t=t.replace("border-top-color","border-color"),t=t.replace("border-top-left-radius","border-radius"),t=t.replace("border-top-style","border-style"),t=t.replace("background-position-x: 50%; background-position-y: 50%;","background-position: center;"),t=t.replace("background-position-x: 50%; background-position-y: 100%;","background-position: center bottom;"),t=t.replace("background-repeat-x: no-repeat; background-repeat-y: no-repeat;","background-repeat: no-repeat;"),t=t.replace("background-repeat-x: repeat;","background-repeat: repeat-x;"),E.prototype.show_editor(j,{name:Drupal.t("Content"),attrs:{content:p,link:n,image:k,el_class:s,style:t,icon:o}},function(g){c&&(""!=o&&(a(b).removeClass(o),g.el_class=g.el_class+" "+g.icon),"A"==a(b).prop("tagName")&&a(b).attr("href",g.link),"IMG"==a(b).prop("tagName")?a(b).attr("src",g.image):""!=p&&""!=g.content?a(b).html(g.content):a(b).html("&nbsp;&nbsp;&nbsp;")),e&&(a(b).attr("class",g.el_class),a(b).attr("style",g.style)),i.attrs.content=a(i.dom_content_element).html(),i.restore_content(),d(),h(),f()})}function c(b){var c=a(b).clone();a(c).find("*").each(function(){for(var a=this;a.attributes.length>0;)a.removeAttribute(a.attributes[0].name)});var d=a(c).html();return d=d.replace(/\s*/g,"")}function d(){e();for(var b=0;b<i.synchronizable.length;b++)a(i.dom_content_element).find(i.synchronizable[b]).each(function(){if(0==a(this).closest("[data-az-restore]").length){a(this).find(".editable-highlight").removeClass("editable-highlight"),a(this).find(".styleable-highlight").removeClass("styleable-highlight"),a(this).find(".sortable-highlight").removeClass("sortable-highlight"),a(this).find('[class=""]').removeAttr("class"),a(this).find('[style=""]').removeAttr("style");var b=a(this).data("synchronized");if(b)for(var d=0;d<b.length;d++)a(b[d]).html(a(this).html());a(this).data("current-state")?a(document).trigger("glazed_synchronize",{from_node:this,old_state:a(this).data("current-state"),new_state:a(this).html()}):a(document).trigger("glazed_synchronize",{from_node:this,old_state:c(this),new_state:a(this).html()}),a(this).data("current-state",c(this)),i.attrs.content=a(i.dom_content_element).html(),i.restore_content()}});h()}function e(){for(var b=0;b<i.sortable.length;b++)a(i.dom_content_element).find(i.sortable[b]).each(function(){a(this).hasClass("ui-sortable")&&a(this).data("sortable")&&(a(this).data("sortable",!1),a(this).sortable("destroy"),a(this).find(".ui-sortable-handle").removeClass("ui-sortable-handle"))})}function f(){for(var b=0;b<i.sortable.length;b++)a(i.dom_element).find(i.sortable[b]).each(function(){0==a(this).closest("[data-az-restore]").length&&(a(this).data("sortable",!0),a(this).sortable({items:"> *",placeholder:"az-sortable-placeholder",forcePlaceholderSize:!0,start:function(b,c){a(c.item).removeClass("sortable-highlight").find(".az-sortable-controls").remove()},update:function(b,c){i.attrs.content=a(i.dom_content_element).html(),i.restore_content(),d()},over:function(a,b){b.placeholder.attr("class",b.helper.attr("class")),b.placeholder.removeClass("ui-sortable-helper"),b.placeholder.addClass("az-sortable-placeholder")}}))})}function h(){function b(b){if(a(b).hasClass("sortable-highlight")){a(b).find(".az-sortable-controls").remove();var c=a('<div class="az-sortable-controls"></div>').appendTo(b),f=a('<div class="az-sortable-clone glyphicon glyphicon-duplicate" title="'+Drupal.t("Clone")+'"></div>').appendTo(c).click(function(){return e(),a(b).removeClass("sortable-highlight").find(".az-sortable-controls").remove(),a(b).clone().insertAfter(b),i.attrs.content=a(i.dom_content_element).html(),i.restore_content(),d(),h(),!1});a(f).css("line-height",a(f).height()+"px").css("font-size",a(f).height()/2+"px");var g=a('<div class="az-sortable-remove glyphicon glyphicon-trash" title="'+Drupal.t("Remove")+'"></div>').appendTo(c).click(function(){return e(),a(b).removeClass("sortable-highlight").find(".az-sortable-controls").remove(),a(b).remove(),i.attrs.content=a(i.dom_content_element).html(),i.restore_content(),d(),h(),!1});a(g).css("line-height",a(g).height()+"px").css("font-size",a(g).height()/2+"px")}}for(var c=0;c<i.restoreable.length;c++)a(i.dom_element).find(i.restoreable[c]).off("mouseenter.az-restoreable").on("mouseenter.az-restoreable",function(){a(this).addClass("restoreable-highlight")}),a(i.dom_element).find(i.restoreable[c]).off("mouseleave.az-restoreable").on("mouseleave.az-restoreable",function(){a(this).removeClass("restoreable-highlight")}),a(i.dom_element).find(i.restoreable[c]).off("click.az-restoreable").on("click.az-restoreable",function(b){if(a(this).is("[data-az-restore]")){var c=[];c.push(G({type:"html",heading:Drupal.t("HTML"),param_name:"html"}));var e=a(this).attr("data-az-restore"),f=i.restore_nodes[e];return E.prototype.show_editor(c,{name:Drupal.t("Content"),attrs:{html:f}},function(a){i.restore_nodes[e]=a.html,i.restore_content(),i.update_dom(),d()}),!1}});for(var c=0;c<i.styleable.length;c++)a(i.dom_element).find(i.styleable[c]).off("mouseenter.az-styleable").on("mouseenter.az-styleable",function(){0==a(this).closest("[data-az-restore]").length&&a(this).addClass("styleable-highlight")}),a(i.dom_element).find(i.styleable[c]).off("mouseleave.az-styleable").on("mouseleave.az-styleable",function(){0==a(this).closest("[data-az-restore]").length&&a(this).removeClass("styleable-highlight")}),a(i.dom_element).find(i.styleable[c]).off("click.az-styleable").on("click.az-styleable",function(b){if(0==a(this).closest("[data-az-restore]").length){if(0==a(this).parent().closest(".styleable-highlight, .editable-highlight").length)return qa.edit_stack.push({node:this,edit:!1,style:!0}),j(),!1;qa.edit_stack.push({node:this,edit:!1,style:!0})}});for(var c=0;c<i.editable.length;c++)a(i.dom_element).find(i.editable[c]).off("mouseenter.az-editable").on("mouseenter.az-editable",function(){0==a(this).closest("[data-az-restore]").length&&a(this).addClass("editable-highlight")}),a(i.dom_element).find(i.editable[c]).off("mouseleave.az-editable").on("mouseleave.az-editable",function(){0==a(this).closest("[data-az-restore]").length&&a(this).removeClass("editable-highlight")}),a(i.dom_element).find(i.editable[c]).off("click.az-editable").on("click.az-editable",function(b){if(0==a(this).closest("[data-az-restore]").length){if(0==a(this).parent().closest(".styleable-highlight, .editable-highlight").length)return qa.edit_stack.push({node:this,edit:!0,style:!0}),j(),!1;qa.edit_stack.push({node:this,edit:!0,style:!0})}});var g=[],k=null,l=null;a(i.dom_element).off("mousemove.az-able").on("mousemove.az-able",function(){null!=k&&a(k).hasClass("sortable-highlight")&&(clearTimeout(l),l=setTimeout(function(){b(k)},1e3))});for(var c=0;c<i.sortable.length;c++)!function(c){a(i.dom_element).find(i.sortable[c]).find("> *").off("mouseenter.az-sortable").on("mouseenter.az-sortable",function(){if(0==a(this).closest("[data-az-restore]").length){var c=this;a(i.dom_element).find(".az-sortable-controls").remove(),a(i.dom_element).find(".sortable-highlight").removeClass("sortable-highlight"),null!==k&&clearTimeout(l),a(c).addClass("sortable-highlight"),g.push(c),k=c,l=setTimeout(function(){b(c)},1e3)}}),a(i.dom_element).find(i.sortable[c]).find("> *").off("mouseleave.az-sortable").on("mouseleave.az-sortable",function(){if(0==a(this).closest("[data-az-restore]").length){var c=this;a(i.dom_element).find(".az-sortable-controls").remove(),a(i.dom_element).find(".sortable-highlight").removeClass("sortable-highlight"),null!==k&&clearTimeout(l),g.pop(),g.length>0?(c=g[g.length-1],a(c).addClass("sortable-highlight"),k=c,l=setTimeout(function(){b(c)},1e3)):k=null}})}(c);f()}if(window.glazed_editor){var i=this;K.prototype.show_controls.apply(this,arguments);var j=function(){if(qa.edit_stack.length>0){var c=qa.edit_stack.shift();a(c.node).css("outline-width","2px"),a(c.node).css("outline-style","dashed");var d=setInterval(function(){"rgb(255, 0, 0)"!=a(c.node).css("outline-color")?a(c.node).css("outline-color","rgb(255, 0, 0)"):a(c.node).css("outline-color","rgb(255, 255, 255)")},100);setTimeout(function(){clearInterval(d),a(c.node).css("outline-color",""),a(c.node).css("outline-width",""),a(c.node).css("outline-style",""),b(c.node,c.edit,c.style,function(){if(qa.edit_stack.length>0){var b=a(c.node).width()*a(c.node).height();a(qa.edit_stack[0].node).width()*a(qa.edit_stack[0].node).height()/b<2?j():qa.edit_stack=[]}})},500)}};a(document).on("glazed_synchronize",function(b,d){e();for(var f=0;f<i.synchronizable.length;f++)a(i.dom_content_element).find(i.synchronizable[f]).each(function(){if(0==a(this).closest("[data-az-restore]").length&&(a(this).find(".editable-highlight").removeClass("editable-highlight"),a(this).find(".styleable-highlight").removeClass("styleable-highlight"),a(this).find(".sortable-highlight").removeClass("sortable-highlight"),a(this).find('[class=""]').removeAttr("class"),a(this).find('[style=""]').removeAttr("style"),this!=d.from_node&&c(this)==d.old_state)){var b=a(d.from_node).data("synchronized");b||(b=[]),b.push(this),b=a.unique(b),a(d.from_node).data("synchronized",b),b=a(this).data("synchronized"),b||(b=[]),b.push(d.from_node),b=a.unique(b),a(this).data("synchronized",b),a(this).html(d.new_state),i.attrs.content=a(i.dom_content_element).html(),i.restore_content()}});h()}),h(),d()}},restore_content:function(){var b=a("<div>"+this.attrs.content+"</div>");for(var c in this.restore_nodes)a(b).find('[data-az-restore="'+c+'"]').html(this.restore_nodes[c]);a(document).trigger("glazed_restore",{dom:b}),this.attrs.content=a(b).html()},get_content:function(){return this.restore_content(),K.prototype.get_content.apply(this,arguments)},restore:function(b){K.prototype.restore.apply(this,arguments);for(var c in this.restore_nodes)a(b).find('[data-az-restore="'+c+'"]').html(this.restore_nodes[c]);a(document).trigger("glazed_restore",{dom:b}),a(b).find("[data-az-restore]").removeAttr("data-az-restore")},showed:function(a){K.prototype.showed.apply(this,arguments);var b=this;if(b.section){var c=a(b.dom_element).parent().closest(".container, .container-fluid"),d=a(b.dom_element).parentsUntil(".container, .container-fluid"),e=a(b.dom_element).parent().closest(".az-popup-ctnr"),f=a(b.dom_element).parentsUntil(".az-popup-ctnr");(c.length>0&&0==e.length||c.length>0&&e.length>0&&d.length<f.length)&&a(b.dom_content_element).find(".container, .container-fluid").each(function(){a(this).removeClass(ma+"container"),a(this).removeClass(ma+"container-fluid"),b.attrs.content=a(b.dom_content_element).html(),b.restore_content(),b.section=!1})}},render:function(a){var b=this;this.dom_element=a('<div class="az-element az-template '+this.get_el_classes()+'" style="'+this.attrs.style+'"></div>'),this.dom_content_element=a("<div></div>").appendTo(this.dom_element);var c="<div>"+this.attrs.content+"</div>";c=a(c),b.restore_nodes={};for(var d=0;d<this.restoreable.length;d++)a(c).find(this.restoreable[d]).each(function(){var c=_.uniqueId("r");a(this).attr("data-az-restore",c),b.restore_nodes[c]=a(this).html()});this.attrs.content=a(c).html(),a(this.attrs.content).appendTo(this.dom_content_element),K.prototype.render.apply(this,arguments)}})}this.template_elements_loaded=!0,ia(),this.try_render_unknown_elements(),a(function(){function c(b){if(1===Object.keys(b).length&&"_"in b)return null;var d=a('<ul class="nav az-nav-list"></ul>');for(var e in b)if("_"!=e){var f=a("<li></li>").appendTo(d).on("mouseenter",function(){a(this).find("> .az-nav-list").css("display","block")}),g=b[e];!function(b){a('<a href="#">'+e+"</a>").appendTo(f).click(function(){function c(b){for(var d in b)if("_"==d)for(var e=0;e<b[d].length;e++)a('<img class="az-thumbnail" data-az-base="'+b[d][e].name+'" src="'+encodeURI(b[d][e].thumbnail)+'">').appendTo(j);else c(b[d])}var d=this;a(j).empty(),a(j).css("display","block"),a(i).addClass("az-thumbnails"),c(b),a(i).off("mouseleave").on("mouseleave",function(){e||(a(i).css("left",""),a(i).removeClass("az-thumbnails"),a(j).css("overflow-y","scroll"),a(j).css("display","none"))});var e=!1,f=0;return a(j).sortable({items:".az-thumbnail",connectWith:".az-ctnr",start:function(b,c){e=!0,a(i).css("left","0px"),a(j).css("overflow-y","visible"),f=a(window).scrollTop(),a(window).on("scroll.template-elements-sortable",function(){a(window).scrollTop(f)})},stop:function(b,c){e=!1,a(i).css("left",""),a(i).removeClass("az-thumbnails"),a(j).css("overflow-y","scroll"),a(j).css("display","none"),a(window).off("scroll.template-elements-sortable")},update:function(b,c){for(var e=qa.get_element(a(c.item).parent().closest("[data-az-id]").attr("data-az-id")),g=0,h=a(c.item).parent().find("[data-az-id], .az-thumbnail"),i=0;i<h.length;i++)if(a(h[i]).hasClass("az-thumbnail")){g=i;break}qa.create_element(e,a(c.item).attr("data-az-base"),g,function(){});a(c.item).detach(),a(d).click(),a(window).scrollTop(f)},placeholder:"az-sortable-placeholder",forcePlaceholderSize:!0,over:function(a,b){b.placeholder.attr("class",b.helper.attr("class")),b.placeholder.removeClass("ui-sortable-helper"),b.placeholder.addClass("az-sortable-placeholder")}}),!1})}(g),a(f).append(c(b[e]))}return d}if(window.glazed_editor&&Object.keys(b).length>0&&ra.length>0){var d={_:[]};for(var e in b){var f=e.split("|");f.pop();for(var g=d,h=0;h<f.length;h++)f[h]in g||(g[f[h]]={_:[]}),g=g[f[h]];g._.push(b[e])}var i=a('<div id="az-template-elements" class="az-left-sidebar glazed"></div>').appendTo("body");a('<div class="glazed-snippets-header clearfix"><img src="'+window.glazed_baseurl+'images/glazed-logo-white.svg"><h3>'+Drupal.t("Glazed Snippets")+"</h3></div>").appendTo(i),a(i).append(c(d)),a(i).find("> .az-nav-list > li").on("mouseleave",function(){a(this).find(".az-nav-list").css("display","none")});var j=a('<div id="az-thumbnails"></div>').appendTo(i)}})},create_cms_elements:function(b){for(var c in b){var d="az_"+c,e=function(a,b){e.baseclass.apply(this,arguments)};L(d,!1,e);var g={name:b[c],icon:"fa fa-drupal",description:Drupal.t(""),category:"CMS",instance:c,params:[G({type:"cms_settings",heading:Drupal.t("Settings"),param_name:"settings",instance:c})],show_settings_on_create:!0,is_container:!0,has_content:!0,is_cms_element:!0,get_button:function(){var a=this.name.replace(/^Block: /,"");return'<div class="well text-center pull-left text-overflow glazed-cms" data-az-element="'+this.base+'"><i class="'+this.icon+'"></i>'+a+"</div>"},get_button_with_tag:function(){var b="",c=this.name.replace(/^View: /,"");return a.inArray(window.glazed_views_tags,this.base>-1)&&(b=window.glazed_views_tags[this.base]),'<div class="well text-center pull-left text-overflow glazed-cms" data-az-element="'+this.base+'" data-az-tag="'+b+'"><i class="'+this.icon+'"></i>'+c+"</div>"},get_content:function(){return""},showed:function(a){if(e.baseclass.prototype.showed.apply(this,arguments),"content"in this.attrs&&""!=this.attrs.content)a(this.dom_content_element).append(this.attrs.content),this.attrs.content="";else{var b=this;glazed_add_js({path:"vendor/jquery.waypoints/lib/jquery.waypoints.min.js",loaded:"waypoint"in a.fn,callback:function(){a(b.dom_element).waypoint(function(c){var d=b.parent.get_my_container(),e={display_title:b.attrs.display_title,override_pager:b.attrs.override_pager,items:b.attrs.items,offset:b.attrs.offset,contextual_filter:b.attrs.contextual_filter,toggle_fields:b.attrs.toggle_fields};v(b.instance,b.attrs.settings,d.attrs.container,e,function(c){a(b.dom_content_element).empty(),a(b.dom_content_element).append(c),Drupal.attachBehaviors(a(b.dom_content_element))},!0)},{offset:"100%",handler:function(a){this.destroy()}}),a(document).trigger("scroll")}})}},render:function(a){this.dom_element=a('<div class="az-element az-cms-element '+this.get_el_classes()+'" style="'+this.attrs.style+'"></div>'),this.dom_content_element=a("<div></div>").appendTo(this.dom_element),e.baseclass.prototype.render.apply(this,arguments)}};if(c.match(/^block-/)&&g.params.push(G({type:"checkbox",heading:Drupal.t("Show title"),param_name:"display_title",content:"yes",value:{yes:Drupal.t("Yes")}})),c.match("^view-")){var h={type:"textfield",heading:Drupal.t("Items to display"),param_name:"items",description:Drupal.t("The number of items to display. Enter 0 for no limit."),can_be_empty:!0,dependency:{element:"override_pager",value:["yes"]}};if(!window.glazed_cms_element_views_settings.hasOwnProperty(d))continue;"block"==window.glazed_cms_element_views_settings[d].view_display_type?(h.heading=Drupal.t("Items to display:"),h.description=Drupal.t("The number of items to display. Enter 0 for no limit.")):(h.heading=Drupal.t("Items per page:"),h.description=Drupal.t("The number to display per page. Enter 0 for no limit.")),window.glazed_cms_element_views_settings[d].title&&g.params.push(G({type:"checkbox",heading:Drupal.t("Show title"),param_name:"display_title",content:"yes",value:{yes:Drupal.t("Yes")}})),g.params.push(G({type:"dropdown",heading:Drupal.t("Override pager"),param_name:"override_pager",value:{no:Drupal.t("No"),yes:Drupal.t("Yes")}})),window.glazed_cms_element_views_settings[d].pager.items_per_page&&(h.value=window.glazed_cms_element_views_settings[d].pager.items_per_page),g.params.push(G(h));var i={type:"textfield",heading:Drupal.t("Pager Offset"),param_name:"offset",description:Drupal.t("The number of items to skip."),can_be_empty:!0,dependency:{element:"override_pager",value:["yes"]}};if(window.glazed_cms_element_views_settings[d].pager.offset&&(i.value=window.glazed_cms_element_views_settings[d].pager.offset),g.params.push(G(i)),window.glazed_cms_element_views_settings[d].contextual_filter&&g.params.push(G({type:"textfield",heading:Drupal.t("Contextual filter:"),param_name:"contextual_filter",description:Drupal.t('Separate contextual filter values with a "/". For example, 40/12/10.'),can_be_empty:!0})),window.glazed_cms_element_views_settings[d].use_fields){var j={type:"checkboxes",heading:Drupal.t("Field settings"),param_name:"toggle_fields",value:{},tab:Drupal.t("Toggle Fields")};for(var k in window.glazed_cms_element_views_settings[d].field_list){var l=window.glazed_cms_element_views_settings[d].field_list[k];j.value[k]=l}""!=window.glazed_cms_element_views_settings[d].field_values&&(j.content=window.glazed_cms_element_views_settings[d].field_values),g.params.push(G(j))}}g.params=g.params.concat(e.prototype.params),f(e.prototype,g)}this.cms_elements_loaded=!0,ia(),this.try_render_unknown_elements()},create_element:function(a,b,c,d){if(a.get_nested_depth(b)<K.prototype.max_nested_depth){var e=K.prototype.elements[b];if(a instanceof da&&null==a.parent&&!e.prototype.section){var f=new U(a,c);f.update_dom();var g=new e(f,!1);d(g),g.update_dom(),a.update_empty(),f.update_empty()}else{var g=new e(a,c);d(g),g.update_dom(),a.update_empty()}return g}return alert(Drupal.t("Element can not be added. Max nested depth reached.")),!1},make_elements_modal:function(b,c){var d=b.get_all_disallowed_elements(),e={};for(var f in K.prototype.elements)if(!(K.prototype.elements[f].prototype.hidden||"az_popup"!=b.base&&d.indexOf(K.prototype.elements[f].prototype.base)>=0||"Template-elements"==K.prototype.elements[f].prototype.category))if("CMS"==K.prototype.elements[f].prototype.category){var g=K.prototype.elements[f].prototype.name.match(/^Block/)?"Blocks":"Views",h="block-views";K.prototype.elements[f].prototype.base.indexOf(h)<0&&(g in e||(e[g]=[]),e[g].push(K.prototype.elements[f]))}else K.prototype.elements[f].prototype.category in e||(e[K.prototype.elements[f].prototype.category]=[]),e[K.prototype.elements[f].prototype.category].push(K.prototype.elements[f]);var i=a('<div id="az-elements-tabs"></div>'),j=0,k='<ul class="nav nav-tabs">';for(var l in e)j++,""===l&&(l=Drupal.t("Content")),k+='<li><a href="#az-elements-tab-'+j+'" data-toggle="tab">'+l+"</a></li>";window.glazed_online&&(k+='<li><a href="#az-elements-tab-templates" data-toggle="tab">'+Drupal.t("Saved Templates")+"</a></li>"),k+="</ul>",a(i).append(k),j=0;var m=a('<div class="tab-content"></div>'),n=0;for(var l in e){j++;var o=a('<div id="az-elements-tab-'+j+'" class="tab-pane clearfix"></div>');if("Views"==l){n=j;for(var p=0;p<e[l].length;p++)a(o).append(e[l][p].prototype.get_button_with_tag())}else for(var p=0;p<e[l].length;p++)a(o).append(e[l][p].prototype.get_button());a(m).append(o)}var q=[];for(var r in window.glazed_views_tags)-1==q.indexOf(window.glazed_views_tags[r])&&q.push(window.glazed_views_tags[r]);var s="<div class='filter-tags'><label>"+Drupal.t("Filter by tag")+"</label><select><option value='all_views'>"+Drupal.t("show all")+"</option>";for(var r in q)s=s+'<option value="'+q[r]+'">'+q[r].replace(/_/g," ")+"</option>";s+="</select></div>",s=a(s),s.find("select").bind("change",function(){var a=this.options[this.selectedIndex].value;m.find("#az-elements-tab-"+n+" .well").trigger("filtredData",a)}),m.find("#az-elements-tab-"+n+" .well").bind("filtredData",function(b,c){var d=a(this);"all_views"==c?d.show():d.attr("data-az-tag")!=c?d.hide():d.show()}),a(m).find("#az-elements-tab-"+n).prepend(s),window.glazed_online&&(o=a('<div id="az-elements-tab-templates" class="tab-pane clearfix"></div>')),a(m).append(o),a(i).append(m),a("#az-elements-modal").remove();var t='<div class="modal-header"><span class="close" data-dismiss="modal" aria-hidden="true">&times;</span><h4 class="modal-title"><img src="'+window.glazed_baseurl+'images/glazed-logo-white.svg"></h4></div>',u=a('<div id="az-elements-modal" class="modal glazed" style="display:none"><div class="modal-dialog modal-lg"><div class="modal-content">'+t+'<div class="modal-body"></div></div></div></div>');a("body").prepend(u),a(u).find(".modal-body").append(i),a(i).find("> ul a:first")[na+"tab"]("show"),a(u).find("[data-az-element]").click(function(){var d=a(this).attr("data-az-element"),e=qa.create_element(b,d,!1,c);e&&(a("#az-elements-modal")[na+"modal"]("hide"),e.show_settings_on_create&&e.edit())}),window.glazed_online&&a(i).find('a[href="#az-elements-tab-templates"]').on("shown.bs.tab",function(c){y(function(c){var d=a(i).find("#az-elements-tab-templates");a(d).empty();for(var e=0;e<c.length;e++){var f=c[e],g='<div class="well text-center pull-left text-overflow glazed-saved" data-az-template="'+f+'"><i class="glyphicon glyphicon-floppy-disk"></i><div>'+f+"</div></div>";g=a(g).appendTo(d).click(function(){z(a(this).attr("data-az-template"),function(c){var d=b.children.length;K.prototype.parse_shortcode.call(b,c);for(var e=d;e<b.children.length;e++)b.children[e].recursive_render();for(var e=d;e<b.children.length;e++)a(b.dom_content_element).append(b.children[e].dom_element);window.glazed_editor&&(b.update_empty(),b.update_sortable()),b.recursive_showed(),a("#az-elements-modal")[na+"modal"]("hide")})}),a('<span class="fa fa-trash-o" data-az-template="'+f+'"></span>').appendTo(g).click(function(){var b=a(this).attr("data-az-template");B(b),a(d).find('[data-az-template="'+b+'"]').remove()})}})})},show:function(b,c){a("#az-elements-modal").remove(),this.make_elements_modal(b,c),a("#az-elements-modal")[na+"modal"]("show"),a("#az-elements-modal #az-elements-tabs").find("> ul a:first")[na+"tab"]("show")},showTemplates:function(b,c){a("#az-elements-modal").remove(),this.make_templates_modal(b,c),a("#az-elements-modal")[na+"modal"]("show"),a("#az-elements-modal #az-elements-tabs").find("> ul a:first")[na+"tab"]("show")},make_templates_modal:function(b,c){var d=a('<div id="az-elements-tabs"></div>'),e='<ul class="nav nav-tabs">';window.glazed_online&&(e+='<li><a href="#az-elements-tab-templates" data-toggle="tab">'+Drupal.t("Layouts")+"</a></li>"),e+="</ul>",a(d).append(e);var f=a('<div class="tab-content"></div>');window.glazed_online&&(tab=a('<div id="az-elements-tab-templates" class="tab-pane clearfix"></div>')),a(f).append(tab),a(d).append(f),a("#az-elements-modal").remove();var g='<div class="modal-header"><span class="close" data-dismiss="modal" aria-hidden="true">&times;</span><h4 class="modal-title"><img src="'+window.glazed_baseurl+'images/glazed-logo-white.svg"></h4></div>',h=a('<div id="az-elements-modal" class="modal glazed" style="display:none"><div class="modal-dialog modal-lg"><div class="modal-content">'+g+'<div class="modal-body"></div></div></div></div>');a("body").prepend(h),a(h).find(".modal-body").append(d),window.glazed_online&&C(function(c){var e=a(d).find("#az-elements-tab-templates"),f=[];f[0]=a('<div class="col-md-4"></div>'),f[1]=a('<div class="col-md-4"></div>'),f[2]=a('<div class="col-md-4"></div>');var g=0;if(a(e).empty(),a.isArray(c))for(var h=0;h<c.length;h++){g=h%3;var i=c[h].title,j=c[h].uuid,k=a('<div class="page-template text-center pull-left text-overflow glazed-saved" data-az-template="'+j+'"><div class="lead">'+i+"</div></div>");if(""!=c[h].image){var l=a('<img class="template-image" src="'+c[h].image+'"></img>');l.appendTo(k)}else{var m=a('<i class="glyphicon glyphicon-floppy-disk"></i>');m.appendTo(k)}k.appendTo(f[g]).click(function(){D(a(this).attr("data-az-template"),function(c){var d=b.children.length;K.prototype.parse_shortcode.call(b,c);for(var e=d;e<b.children.length;e++)b.children[e].recursive_render();for(var e=d;e<b.children.length;e++)a(b.dom_content_element).append(b.children[e].dom_element);window.glazed_editor&&(b.update_empty(),b.update_sortable()),b.recursive_showed(),a("#az-elements-modal")[na+"modal"]("hide"),a(window).trigger("CKinlineAttach")})}),f[0].appendTo(e),f[1].appendTo(e),f[2].appendTo(e)}else a(c).appendTo(e)})},get_element:function(a){return this.elements_instances[a]},delete_element:function(b){a(document).trigger("glazed_delete_element",b),delete this.elements_instances[b]},add_element:function(b,c,d){this.elements_instances[b]=c,a(document).trigger("glazed_add_element",{id:b,position:d})}});var za={};"glazed_classes"in window&&(za=window.glazed_classes),K.prototype={el_classes:a.extend({"optgroup-bootstrap":Drupal.t("Bootstrap classes"),"bg-default":Drupal.t("Background default style"),"bg-primary":Drupal.t("Background primary style"),"bg-success":Drupal.t("Background success style"),"center-block":Drupal.t("Block align center"),clearfix:Drupal.t("Clearfix"),"hidden-lg":Drupal.t("Hidden on large devices, desktops (1200px)"),"hidden-md":Drupal.t("Hidden on medium devices, desktops (992px)"),"hidden-sm":Drupal.t("Hidden on small devices, tablets (768px)"),"hidden-xs":Drupal.t("Hidden on extra small devices, phones (<768px)"),lead:Drupal.t("Text Lead style"),"pull-left":Drupal.t("Pull left"),"pull-right":Drupal.t("Pull right"),"text-center":Drupal.t("Text align center"),"text-default":Drupal.t("Text default style"),"text-justify":Drupal.t("Text align justify"),"text-left":Drupal.t("Text align left"),"text-muted":Drupal.t("Text muted style"),"text-primary":Drupal.t("Text primary style"),"text-right":Drupal.t("Text align right"),"text-success":Drupal.t("Text success style"),"visible-lg-block":Drupal.t("Visible on large devices, desktops (1200px)"),"visible-md-block":Drupal.t("Visible on medium devices, desktops (992px)"),"visible-sm-block":Drupal.t("Visible on small devices, tablets (768px)"),"visible-xs-block":Drupal.t("Visible on extra small devices, phones (<768px)"),well:Drupal.t("Well"),small:Drupal.t("Text small style"),"optgroup-glazed-shadows":Drupal.t("Drop Shadows"),"stpe-dropshadow stpe-dropshadow--curved-hz1 stpe-dropshadow--curved":Drupal.t("Curved Horiztonal Drop Shadow"),"stpe-dropshadow stpe-dropshadow--curved-hz2 stpe-dropshadow--curved":Drupal.t("Curved Horizontal Double Drop Shadow"),"stpe-dropshadow stpe-dropshadow--curved-vt2 stpe-dropshadow--curved":Drupal.t("Curved vertical double shadow"),"stpe-dropshadow stpe-dropshadow--lifted":Drupal.t("Lifted Drop Shadow"),"stpe-dropshadow stpe-dropshadow--perspective":Drupal.t("Perspective Drop Shadow"),"stpe-dropshadow stpe-dropshadow--raised":Drupal.t("Raised Drop Shadow")},za),elements:{},tags:{},max_nested_depth:3,name:"",category:"",description:"",params:[G({type:"textfield",heading:Drupal.t("Utility classes"),param_name:"el_class",description:Drupal.t("Add classes for Bootstrap effects or Glazed theme colors and utilities.")}),G({type:"style",heading:Drupal.t("Style"),param_name:"style",description:Drupal.t("Style options."),tab:Drupal.t("Style")}),G({type:"bootstrap_slider",heading:Drupal.t("Drop shadow"),param_name:"shadow",max:"5",value:"0",tab:Drupal.t("Style")}),G({type:"style",heading:Drupal.t("Hover style"),param_name:"hover_style",important:!0,description:Drupal.t("Hover style options."),tab:Drupal.t("Hover style")}),G({type:"bootstrap_slider",heading:Drupal.t("Drop shadow"),param_name:"hover_shadow",max:"5",value:"0",tab:Drupal.t("Hover style")}),G({type:"bootstrap_slider",heading:Drupal.t("Left"),param_name:"pos_left",tab:Drupal.t("Placement"),max:"1",step:"0.01",hidden:!0}),G({type:"bootstrap_slider",heading:Drupal.t("Right"),param_name:"pos_right",tab:Drupal.t("Placement"),max:"1",step:"0.01",hidden:!0}),G({type:"bootstrap_slider",heading:Drupal.t("Top"),param_name:"pos_top",tab:Drupal.t("Placement"),max:"1",step:"0.01",hidden:!0}),G({type:"bootstrap_slider",heading:Drupal.t("Bottom"),param_name:"pos_bottom",tab:Drupal.t("Placement"),max:"1",step:"0.01",hidden:!0}),G({type:"bootstrap_slider",heading:Drupal.t("Width"),param_name:"pos_width",tab:Drupal.t("Placement"),max:"1",step:"0.01",hidden:!0}),G({type:"bootstrap_slider",heading:Drupal.t("Height"),param_name:"pos_height",tab:Drupal.t("Placement"),max:"1",step:"0.01",hidden:!0}),G({type:"bootstrap_slider",heading:Drupal.t("Z-index"),param_name:"pos_zindex",tab:Drupal.t("Placement"),hidden:!0})],icon:"",thumbnail:"",is_container:!1,has_content:!1,frontend_render:!1,show_settings_on_create:!1,wrapper_class:"",weight:0,hidden:!1,disallowed_elements:[],controls_base_position:"center",show_parent_controls:!1,highlighted:!0,style_selector:"",section:!1,controls_position:function(b){if(this.dom_element){var c=this.dom_element[0].getBoundingClientRect();if(b||c.bottom>0&&c.top<document.documentElement.clientHeight){var d=this.controls[0].getBoundingClientRect();if(this.children.length>0&&_.has(this.children[0].controls,"0")&&!this.children[0].show_parent_controls){M(this.children[0].controls[0].getBoundingClientRect(),d)&&this.children[0].dom_element.addClass("az-element--controls-spacer")}else if(_.has(this,"parent")&&_.has(this.parent.controls,"0")&&!this.show_parent_controls){var e=this.parent.controls[0].getBoundingClientRect();if(M(e,d)&&a(this.dom_element).addClass("az-element--controls-spacer"),this.parent.show_parent_controls){var f=this.parent.parent.controls[0].getBoundingClientRect();M(f,d)&&a(this.dom_element).addClass("az-element--controls-spacer")}}if(c.top+a(window).scrollTop()<300){if(a("body.body--glazed-header-navbar_pull_down #navbar").length>0){var g=a("#navbar .container-col")[0].getBoundingClientRect();M(g,d)&&a(this.dom_element).closest(".glazed-editor").css("margin-top",g.height/2)}if(a("body.body--glazed-header-overlay #navbar").length>0){var g=a("#navbar")[0].getBoundingClientRect();M(g,d)&&this.controls.css("margin-top",g.height+32)}if(a("#navbar.glazed-header--fixed").length>0){var g=a("#navbar")[0].getBoundingClientRect();M(g,d)&&this.controls.css("margin-top",g.height+32)}}if(!this.is_container||this.has_content){var h=a(this.dom_element).height(),i=a(window).height();if(h>i){var j=a(window).scrollTop(),k=(this.controls.offset().top,a(this.dom_element).offset().top),l=j-k+i/2;l>40&&l<h?this.controls.css("top",l):l>h?this.controls.css("top",h-40):this.controls.css("top",40)}}}}},update_controls_zindex:function(){l(this.controls)},show_controls:function(){function b(b){b.controls_position(!0),a(e.controls).attr("data-az-cid",a(b.dom_element).attr("data-az-id"));var c=a(b.dom_element).offset();c.top=c.top-parseInt(a(b.dom_element).css("margin-top"))+parseInt(a(e.controls).css("margin-top")),a(e.controls).offset(c),c.left=c.left+a(e.controls).width()-1,b.controls.offset(c)}if(window.glazed_editor){var d=this;this.controls=a('<div class="controls btn-group btn-group-xs"></div>').prependTo(this.dom_element),a(this.dom_element).addClass("az-element--controls-"+this.controls_base_position),setTimeout(function(){d.update_controls_zindex()},1e3),a('<span title="'+c("Drag and drop")+'" class="control drag-and-drop btn btn-default glyphicon glyphicon-move"><span class="control-label">'+this.name+"</span></span>").appendTo(this.controls),this.is_container&&!this.has_content&&(a('<span title="'+c("Add")+'" class="control add btn btn-default glyphicon glyphicon-plus"> </span>').appendTo(this.controls).click({object:this},this.click_add),a('<span title="'+c("Paste")+'" class="control paste btn btn-default glyphicon glyphicon-hand-down"> </span>').appendTo(this.controls).click({object:this},this.click_paste)),a('<span title="'+c("Edit")+'" class="control edit btn btn-default glyphicon glyphicon-pencil"> </span>').appendTo(this.controls).click({object:this},this.click_edit),a('<span title="'+c("Copy")+'" class="control copy btn btn-default glyphicon glyphicon-briefcase"> </span>').appendTo(this.controls).click({object:this},this.click_copy),a('<span title="'+c("Clone")+'" class="control clone btn btn-default glyphicon glyphicon-duplicate"> </span>').appendTo(this.controls).click({object:this},this.click_clone),a('<span title="'+c("Remove")+'" class="control remove btn btn-default glyphicon glyphicon-trash"> </span>').appendTo(this.controls).click({object:this},this.click_remove),window.glazed_online&&a('<span title="'+c("Save as template")+'" class="control save-template btn btn-default glyphicon glyphicon-floppy-save"> </span>').appendTo(this.controls).click({object:this},this.click_save_template),this.update_empty();if(d.children.length>0&&d.children[0].show_parent_controls||a(d.dom_element).hover(function(){d.controls.addClass("controls--show")},function(){d.controls.removeClass("controls--show")}),setTimeout(function(){d.controls_position(!0)},1500),a(window).scroll(_.debounce(function(){window.pageYOffset>30&&d.controls_position(!1)},500)),a(window).resize(_.debounce(function(){d.controls_position(!0)},500)),d.show_parent_controls){var e=d.parent;_.isString(d.show_parent_controls)&&(e=qa.get_element(a(d.dom_element).closest(d.show_parent_controls).attr("data-az-id"))),a(d.dom_element).off("mouseenter").on("mouseenter",function(){a(d.dom_element).data("hover",!0),a(d.dom_element).parents(".glazed-editor").length>0&&(a(e.controls).addClass("controls--show"),d.controls.addClass("controls--show"),b(d))}),a(d.dom_element).off("mouseleave").on("mouseleave",function(){a(d.dom_element).data("hover",!1),a(d.dom_element).parents(".glazed-editor").length>0&&(a(e.controls).removeClass("controls--show"),d.controls.removeClass("controls--show"))}),setTimeout(function(){a(e.controls).off("mouseenter").on("mouseenter",function(){a(e.controls).data("hover",!0);var b=qa.get_element(a(this).closest("[data-az-cid]").attr("data-az-cid"));_.isUndefined(b)||a(b.controls).addClass("controls--show")}),a(e.controls).off("mouseleave").on("mouseleave",function(){a(e.controls).data("hover",!1);var b=qa.get_element(a(this).closest("[data-az-cid]").attr("data-az-cid"));_.isUndefined(b)||a(b.controls).removeClass("controls--show")})},100)}}},get_empty:function(){return'<div class="az-empty"></div>'},update_empty:function(){if(window.glazed_editor)if(0==this.children.length&&this.is_container&&!this.has_content||this.has_content&&""==this.attrs.content){a(this.dom_content_element).find("> .az-empty").remove();var b=a(this.get_empty()).appendTo(this.dom_content_element);0==a(b).find(".bottom").length&&"bottom",0==a(b).find(".top").length&&"top",a(b).click(function(b){if(1==b.which){var c=a(this).closest("[data-az-id]").attr("data-az-id");qa.show(qa.get_element(c),function(a){})}})}else a(this.dom_content_element).find("> .az-empty").remove()},get_button:function(){return""==this.thumbnail?'<div class="well text-center pull-left text-overflow" data-az-element="'+this.base+'"><i class="'+this.icon+'"></i><div>'+this.name+'</div><div class="text-muted small">'+this.description+"</div></div>":'<div class="well pull-left" data-az-element="'+this.base+'" style="background-image: url('+encodeURI(this.thumbnail)+'); background-position: center center; background-size: cover;"></div>'},click_add:function(a){return a.data.object.add(),!1},add:function(){qa.show(this,function(a){})},update_sortable:function(){window.glazed_editor&&(this.is_container&&!this.has_content||this instanceof ea)&&a(this.dom_content_element).sortable({items:"> .az-element",connectWith:".az-ctnr",handle:"> .controls > .drag-and-drop",update:this.update_sorting,placeholder:"az-sortable-placeholder",forcePlaceholderSize:!0,over:function(a,b){b.placeholder.attr("class",b.helper.attr("class")),b.placeholder.removeClass("ui-sortable-helper"),b.placeholder.addClass("az-sortable-placeholder")}})},replace_render:function(){var b=this.dom_element,c=this.dom_content_element;null!=b&&(this.render(a),a(b).replaceWith(this.dom_element),null!=c&&a(this.dom_content_element).replaceWith(c)),window.glazed_editor&&this.show_controls()},update_dom:function(){this.detach_children(),a(this.dom_element).remove(),this.parent.detach_children(),this.render(a),this.attach_children(),window.glazed_editor&&this.show_controls(),this.parent.attach_children(),window.glazed_editor&&(this.update_sortable(),this.update_empty()),this.showed(a)},get_el_classes:function(){var a=this.attrs.el_class;return this.attrs.shadow>0&&(a=a+" glazed-shadow-"+this.attrs.shadow),this.attrs.hover_shadow>0&&(a=a+" glazed-shadow-hover-"+this.attrs.hover_shadow),a},get_hover_style:function(){return"hover_style"in this.attrs?"<style>\x3c!-- .hover-style-"+this.id+":hover "+this.style_selector+" { "+this.attrs.hover_style+"} --\x3e</style>":""},restore:function(a){},recursive_restore:function(a){for(var b=0;b<this.children.length;b++)this.children[b].recursive_restore(a);this.restore(a)},showed:function(a){"pos_left"in this.attrs&&""!=this.attrs.pos_left&&a(this.dom_element).css("left",this.attrs.pos_left),"pos_right"in this.attrs&&""!=this.attrs.pos_right&&a(this.dom_element).css("right",this.attrs.pos_right),"pos_top"in this.attrs&&""!=this.attrs.pos_top&&a(this.dom_element).css("top",this.attrs.pos_top),"pos_bottom"in this.attrs&&""!=this.attrs.pos_bottom&&a(this.dom_element).css("bottom",this.attrs.pos_bottom),"pos_width"in this.attrs&&""!=this.attrs.pos_width&&a(this.dom_element).css("width",this.attrs.pos_width),"pos_height"in this.attrs&&""!=this.attrs.pos_height&&a(this.dom_element).css("height",this.attrs.pos_height),"pos_zindex"in this.attrs&&""!=this.attrs.pos_zindex&&a(this.dom_element).css("z-index",this.attrs.pos_zindex),"hover_style"in this.attrs&&""!=this.attrs.hover_style&&(a("head").find("#hover-style-"+this.id).remove(),a("head").append(this.get_hover_style()),a(this.dom_element).addClass("hover-style-"+this.id))},render:function(a){a(this.dom_element).attr("data-az-id",this.id)},trigger_start_in_animation:function(){for(var a=0;a<this.children.length;a++)"trigger_start_in_animation"in this.children[a]&&this.children[a].trigger_start_in_animation()},trigger_start_out_animation:function(){for(var a=0;a<this.children.length;a++)"trigger_start_out_animation"in this.children[a]&&this.children[a].trigger_start_out_animation()},update_data:function(){a(this.dom_element).attr("data-azb",this.base);for(var b=0;b<this.params.length;b++){var c=this.params[b];if(c.param_name in this.attrs){var d=this.attrs[c.param_name];(""==d&&c.can_be_empty||""!=d)&&"content"!==c.param_name&&d!==c.value&&(c.safe||(d=encodeURIComponent(d)),a(this.dom_element).attr("data-azat-"+c.param_name,d))}}null!=this.dom_content_element&&a(this.dom_content_element).attr("data-azcnt","true")},recursive_update_data:function(){this.update_data();for(var a=0;a<this.children.length;a++)this.children[a].recursive_update_data()},recursive_clear_animation:function(){"clear_animation"in this&&this.clear_animation();for(var a=0;a<this.children.length;a++)this.children[a].recursive_clear_animation()},recursive_showed:function(){this.showed(a);for(var b=0;b<this.children.length;b++)this.children[b].recursive_showed()},update_sorting_children:function(){var b=a(this.dom_content_element).sortable("option"),c=[];a(this.dom_content_element).find(b.items).each(function(){c.push(qa.get_element(a(this).attr("data-az-id")))}),this.children=c;for(var d=0;d<this.children.length;d++)this.children[d].parent=this;this.update_empty()},update_sorting:function(b,c){var d=qa.get_element(a(c.item).closest("[data-az-id]").attr("data-az-id"));d&&(c.source=qa.get_element(a(this).closest("[data-az-id]").attr("data-az-id")),c.from_pos=d.get_child_position(),c.source.update_sorting_children(),c.target=qa.get_element(a(c.item).parent().closest("[data-az-id]").attr("data-az-id")),c.source.id!=c.target.id&&c.target.update_sorting_children(),c.to_pos=d.get_child_position(),a(document).trigger("glazed_update_sorting",c))},click_edit:function(a){return ja(a),a.data.object.edit(),!1},edit:function(){E.prototype.show_editor(this.params,this,this.edited)},edited:function(b){for(var c in b)this.attrs[c]=i(b[c]);this.update_dom(),a(document).trigger("glazed_edited_element",this.id)},attrs2string:function(){for(var a="",b=0;b<this.params.length;b++){var c=this.params[b];if(c.param_name in this.attrs){var d=this.attrs[c.param_name];(""==d&&c.can_be_empty||""!=d)&&"content"!==c.param_name&&d!==c.value&&(c.safe||(d=encodeURIComponent(d)),a+=c.param_name+'="'+d+'" ')}}return a},get_content:function(){for(var a=0;a<this.params.length;a++){var b=this.params[a];if("content"===b.param_name&&"html"==b.type)return encodeURIComponent(this.attrs.content)}return this.attrs.content},set_content:function(a){for(var b=i(a),c=0;c<this.params.length;c++){var d=this.params[c];if("content"===d.param_name&&"html"==d.type){try{b=decodeURIComponent(atob(b.replace(/^#E\-8_/,"")))}catch(a){b=decodeURIComponent(b.replace(/^#E\-8_/,""))}return void(this.attrs.content=b)}}this.attrs.content=b},parse_attrs:function(b){for(var c=0;c<this.params.length;c++){var d=this.params[c];if(d.param_name in b)if(d.safe)this.attrs[d.param_name]=i(b[d.param_name]);else{var e=i(b[d.param_name]);try{this.attrs[d.param_name]=decodeURIComponent(atob(e.replace(/^#E\-8_/,"")))}catch(a){this.attrs[d.param_name]=decodeURIComponent(e.replace(/^#E\-8_/,""))}}else"value"in d&&_.isString(d.value)&&(this.attrs[d.param_name]=d.value)}for(var f in b)f in this.attrs||(this.attrs[f]=b[f]);a(document).trigger("glazed_edited_element",this.id)},get_nested_depth:function(a){var b=0;return null!=this.parent&&(b+=this.parent.get_nested_depth(a)),this.base==a&&b++,b},get_my_shortcode:function(){var a=_.keys(K.prototype.elements),b=_.object(a,Array.apply(null,new Array(a.length)).map(Number.prototype.valueOf,0));return this.get_shortcode(b)},get_children_shortcode:function(){for(var a=_.keys(K.prototype.elements),b=_.object(a,Array.apply(null,new Array(a.length)).map(Number.prototype.valueOf,0)),c="",d=0;d<this.children.length;d++)c+=this.children[d].get_shortcode(b);return c},get_shortcode:function(a){a[this.base]++;for(var b="",c=0;c<this.children.length;c++)b+=this.children[c].get_shortcode(a);if("az_unknown"==this.base)g=b;else{var d="";if(1==a[this.base])d=this.base;else{var e=a[this.base]-1;d=this.base+"_"+e}var f=this.attrs2string(),g="["+d+" "+f+"]";this.is_container&&(this.has_content?g+=this.get_content()+"[/"+d+"]":g+=b+"[/"+d+"]")}return a[this.base]--,g},parse_shortcode:function(b){var c=_.keys(K.prototype.tags).join("|"),d=va.shortcode.regexp(c),e=a.trim(b).match(d);if(_.isNull(e)){if(0==b.length)return;"["==b.substring(0,1)&&"]"==b.slice(-1)?this.parse_shortcode("[az_unknown]"+b+"[/az_unknown]"):this.parse_shortcode('[az_row][az_column width="1/1"][az_text]'+b+"[/az_text][/az_column][/az_row]")}_.each(e,function(a){var d=a.match(ua(c)),e=d[5],f=new RegExp("^[\\s]*\\[\\[?("+_.keys(K.prototype.tags).join("|")+")(?![\\w-])"),g=va.shortcode.attrs(d[3]),h=d[2];if(!(this.get_nested_depth(h)>K.prototype.max_nested_depth)){var i=ea;if(h in K.prototype.tags&&(i=K.prototype.tags[h]),this instanceof da&&null==this.parent&&!i.prototype.section)return void this.parse_shortcode("[az_section]"+b+"[/az_section]");var j=new i(this,!0);j.parse_attrs(g.named);var k=K.prototype.tags[h].prototype;_.isString(e)&&e.match(f)&&!0===k.is_container?j.parse_shortcode(e):_.isString(e)&&e.length&&"az_row"===h?j.parse_shortcode('[az_column width="1/1"][az_text]'+e+"[/az_text][/az_column]"):_.isString(e)&&e.length&&"az_column"===h&&("["!=e.substring(0,1)||"]"!=e.slice(-1))?j.parse_shortcode("[az_text]"+e+"[/az_text]"):_.isString(e)&&(!0===k.has_content?j.set_content(e):""!=e&&j.parse_shortcode("[az_unknown]"+e+"[/az_unknown]"))}},this)},parse_html:function(b){var c=this;if(0==a(b).children().closest_descendents("[data-azb]").length&&a.trim(a(b).html()).length>0){var d=new V(c,!1);d.children=[];var e=new W(d,!1),f=K.prototype.elements.az_text,g=new f(e,!1);g.attrs.content=a(b).html(),g.update_dom(),"update_empty"in c&&c.update_empty(),"update_empty"in e&&e.update_empty(),"update_empty"in d&&d.update_empty()}else a(b).children().closest_descendents("[data-azb]").each(function(){var b=a(this).attr("data-azb"),d=ea;b in K.prototype.tags&&(d=K.prototype.tags[b]);var e=new d(c,!0);la&&(qa.elements_instances[e.id]=null,delete qa.elements_instances[e.id],e.id=a(this).attr("data-az-id"),qa.elements_instances[e.id]=e),e.dom_element=a(this);var f={};if(a(a(this)[0].attributes).each(function(){this.nodeName.indexOf("data-azat")>=0&&(f[this.nodeName.replace("data-azat-","")]=this.value)}),e.parse_attrs(f),e.is_container){var g=a(this).closest_descendents("[data-azcnt]");g.length>0&&(e.dom_content_element=a(g),e.has_content?e instanceof ea?(e.attrs.content=a(g).wrap("<div></div>").parent().html(),a(g).unwrap()):e.attrs.content=a(g).html():e.parse_html(g))}})},recursive_render:function(){for(var b=0;b<this.children.length;b++)this.children[b].recursive_render();la?this.frontend_render&&(this.detach_children(),this.parent.detach_children(),this.render(a),this.attach_children(),this.parent.attach_children()):(this.render(a),this.attach_children()),window.glazed_editor&&(this.show_controls(),this.update_sortable())},detach_children:function(){for(var b=0;b<this.children.length;b++)a(this.children[b].dom_element).detach()},attach_children:function(){for(var b=0;b<this.children.length;b++)a(this.dom_content_element).append(this.children[b].dom_element)},click_copy:function(a){return a.data.object.copy(),!1},copy:function(){var b=this.get_my_shortcode();a("#glazed-clipboard").html(encodeURIComponent(b))},click_paste:function(a){return a.data.object.paste(0),!1},paste:function(b){var c=decodeURIComponent(a("#glazed-clipboard").html());if(""!=c){var d=this.children.length;K.prototype.parse_shortcode.call(this,c);for(var e=[],f=d;f<this.children.length;f++)this.children[f].recursive_render(),e.push(this.children[f]);this.children=this.children.slice(0,d),this.children.splice.apply(this.children,[b,0].concat(e)),this.detach_children(),this.attach_children(),this.update_empty(),this.update_sortable(),this.recursive_showed()}},click_save_template:function(a){return a.data.object.save_template(),!1},save_template:function(){var a=this.get_my_shortcode(),b=window.prompt(Drupal.t("Enter template name"),"");""!=b&&null!=b&&A(b,a)},click_clone:function(a){return ja(a),a.data.object.clone(),!1},clone:function(){this.copy();for(var b=0;b<this.parent.children.length;b++)if(this.parent.children[b].id==this.id){this.parent.paste(b);break}a(window).trigger("CKinlineAttach")},click_remove:function(a){return a.data.object.remove(),!1},remove:function(){qa.delete_element(this.id);for(var b=0;b<this.children.length;b++)this.children[b].remove();a(this.dom_element).remove();for(var b=0;b<this.parent.children.length;b++)if(this.parent.children[b].id==this.id){this.parent.children.splice(b,1);break}this.parent.update_empty()},get_child_position:function(){for(var a=0;a<this.parent.children.length;a++)if(this.parent.children[a].id==this.id)return a;return-1},add_css:function(a,b,c){this.get_my_container().css[window.glazed_baseurl+a]=!0,b||window.glazed_add_css(a,c)},add_js_list:function(a){for(var b=this.get_my_container(),c=0;c<a.paths.length;c++)b.js[window.glazed_baseurl+a.paths[c]]=!0;window.glazed_add_js_list(a)},add_js:function(a){this.get_my_container().js[window.glazed_baseurl+a.path]=!0,window.glazed_add_js(a)},add_external_js:function(a,b){this.get_my_container().js[a]=!0,window.glazed_add_external_js(a,b)},get_my_container:function(){return this instanceof da?this:this.parent.get_my_container()},get_all_disallowed_elements:function(){if("parent"in this){return _.uniq(this.parent.get_all_disallowed_elements().concat(this.disallowed_elements))}return this.disallowed_elements}},e(N,K),f(N.prototype,{params:[G({type:"dropdown",heading:Drupal.t("Animation start"),param_name:"an_start",tab:Drupal.t("Animation"),value:{"":Drupal.t("No animation"),appear:Drupal.t("On appear"),hover:Drupal.t("On hover"),click:Drupal.t("On click"),trigger:Drupal.t("On trigger")}}),G({type:"dropdown",heading:Drupal.t("Animation in"),param_name:"an_in",tab:Drupal.t("Animation"),value:ta,dependency:{element:"an_start",value:["appear","hover","click","trigger"]}}),G({type:"dropdown",heading:Drupal.t("Animation out"),param_name:"an_out",tab:Drupal.t("Animation"),value:ta,dependency:{element:"an_start",value:["hover","trigger"]}}),G({type:"checkbox",heading:Drupal.t("Hidden"),param_name:"an_hidden",tab:Drupal.t("Animation"),value:{before_in:Drupal.t("Before in-animation"),after_in:Drupal.t("After in-animation")},dependency:{element:"an_start",value:["appear","hover","click","trigger"]}}),G({type:"checkbox",heading:Drupal.t("Infinite"),param_name:"an_infinite",tab:Drupal.t("Animation"),value:{yes:Drupal.t("Yes")},dependency:{element:"an_start",value:["appear","hover","click","trigger"]}}),G({type:"bootstrap_slider",heading:Drupal.t("Appear Boundary"),param_name:"an_offset",tab:Drupal.t("Animation"),max:"100",description:Drupal.t("In percent. (50% is center, 100% is bottom of screen)"),value:"100",dependency:{element:"an_start",value:["appear"]}}),G({type:"bootstrap_slider",heading:Drupal.t("Duration"),param_name:"an_duration",tab:Drupal.t("Animation"),max:"3000",description:Drupal.t("In milliseconds."),value:"1000",step:"50",dependency:{element:"an_start",value:["appear","hover","click","trigger"]}}),G({type:"bootstrap_slider",heading:Drupal.t("In-delay"),param_name:"an_in_delay",tab:Drupal.t("Animation"),max:"10000",description:Drupal.t("In milliseconds."),value:"0",dependency:{element:"an_start",value:["appear","hover","click","trigger"]}}),G({type:"bootstrap_slider",heading:Drupal.t("Out-delay"),param_name:"an_out_delay",tab:Drupal.t("Animation"),max:"10000",description:Drupal.t("In milliseconds."),value:"0",dependency:{element:"an_start",value:["hover","trigger"]}}),G({type:"bootstrap_slider",heading:Drupal.t("Parent number"),param_name:"an_parent",tab:Drupal.t("Animation"),max:"10",min:"0",description:Drupal.t("Define the number of Parent Containers the animation should attempt to break away from."),value:"1",dependency:{element:"an_start",value:["hover","click"]}}),G({type:"textfield",heading:Drupal.t("Name for animations"),param_name:"an_name",hidden:!0})].concat(N.prototype.params),set_in_timeout:function(){var b=this;b.in_timeout=setTimeout(function(){b.clear_animation(),a(b.dom_element).css("opacity",""),a(b.dom_element).removeClass("animated"),a(b.dom_element).removeClass(b.attrs.an_in),a(b.dom_element).removeClass(b.attrs.an_out),b.animation_in=!1,b.animation_out=!1,a(b.dom_element).css("animation-duration",b.attrs.an_duration+"ms"),a(b.dom_element).css("-webkit-animation-duration",b.attrs.an_duration+"ms"),a(b.dom_element).addClass("animated"),b.animated=!0,"yes"==b.attrs.an_infinite&&a(b.dom_element).addClass("infinite"),a(b.dom_element).addClass(b.attrs.an_in),b.animation_in=!0},Math.round(b.attrs.an_in_delay))},start_in_animation:function(){var b=this;0==a(b.dom_element).parents(".glazed-animations-disabled").length&&""!=b.attrs.an_in&&(b.animated?b.animation_out?b.set_in_timeout():b.out_timeout>0&&(clearTimeout(b.out_timeout),b.hidden_after_in||b.set_in_timeout()):b.set_in_timeout())},set_out_timeout:function(){var b=this;b.out_timeout=setTimeout(function(){b.clear_animation(),a(b.dom_element).css("opacity",""),a(b.dom_element).removeClass("animated"),a(b.dom_element).removeClass(b.attrs.an_in),a(b.dom_element).removeClass(b.attrs.an_out),b.animation_in=!1,b.animation_out=!1,a(b.dom_element).css("animation-duration",b.attrs.an_duration+"ms"),a(b.dom_element).css("-webkit-animation-duration",b.attrs.an_duration+"ms"),a(b.dom_element).addClass("animated"),b.animated=!0,"yes"==b.attrs.an_infinite&&a(b.dom_element).addClass("infinite"),a(b.dom_element).addClass(b.attrs.an_out),b.animation_out=!0},Math.round(b.attrs.an_out_delay))},start_out_animation:function(){var b=this;0==a(b.dom_element).parents(".glazed-animations-disabled").length&&""!=b.attrs.an_out&&(b.animated?b.animation_in?b.set_out_timeout():b.in_timeout>0&&(clearTimeout(b.in_timeout),b.hidden_before_in||b.set_out_timeout()):b.set_out_timeout())},clear_animation:function(){this.animation_in&&(this.hidden_before_in&&a(this.dom_element).css("opacity","1"),this.hidden_after_in&&a(this.dom_element).css("opacity","0")),this.animation_out&&(this.hidden_before_in&&a(this.dom_element).css("opacity","0"),this.hidden_after_in&&a(this.dom_element).css("opacity","1")),a(this.dom_element).hasClass("animated")&&(a(this.dom_element).css("animation-duration",""),a(this.dom_element).css("-webkit-animation-duration",""),a(this.dom_element).removeClass("animated"),this.animated=!1,a(this.dom_element).removeClass("infinite"),a(this.dom_element).removeClass(this.attrs.an_in),a(this.dom_element).removeClass(this.attrs.an_out),this.animation_in=!1,this.animation_out=!1)},end_animation:function(){this.in_timeout=0,this.out_timeout=0,this.animation_in&&(this.clear_animation(),"hover"!=this.attrs.an_start||this.hover||this.attrs.an_in!=this.attrs.an_out&&this.start_out_animation()),this.animation_out&&(this.clear_animation(),"hover"==this.attrs.an_start&&this.hover&&this.attrs.an_in!=this.attrs.an_out&&this.start_in_animation())},trigger_start_in_animation:function(){"trigger"==this.attrs.an_start?this.start_in_animation():N.baseclass.prototype.trigger_start_in_animation.apply(this,arguments)},trigger_start_out_animation:function(){"trigger"==this.attrs.an_start?this.start_out_animation():N.baseclass.prototype.trigger_start_out_animation.apply(this,arguments)},animation:function(){var b=this;b.hidden_before_in=_.indexOf(b.attrs.an_hidden.split(","),"before_in")>=0,b.hidden_after_in=_.indexOf(b.attrs.an_hidden.split(","),"after_in")>=0,b.hidden_before_in&&a(b.dom_element).css("opacity","0"),b.hidden_after_in&&a(b.dom_element).css("opacity","1");var c=b.attrs.an_parent;""==c&&(c=1),c=Math.round(c);for(var d=0,e=a(b.dom_element);d<c;)e=a(e).parent().closest("[data-az-id]"),d++;if(""!=b.attrs.an_start){b.in_timeout=0,b.out_timeout=0,b.animated=!1,b.animation_in=!1,b.animation_out=!1;var f=function(){switch(a(e).off("click.az_animation"+b.id),a(e).off("mouseenter.az_animation"+b.id),a(e).off("mouseleave.az_animation"+b.id),b.attrs.an_start){case"click":a(e).on("click.az_animation"+b.id,function(){b.animated||b.start_in_animation()});break;case"appear":b.add_js({path:"vendor/jquery.waypoints/lib/jquery.waypoints.min.js",loaded:"waypoint"in a.fn,callback:function(){a(b.dom_element).waypoint(function(a){b.animated||b.start_in_animation()},{offset:b.attrs.an_offset+"%",handler:function(a){this.destroy()}}),a(document).trigger("scroll")}});break;case"hover":a(e).on("mouseenter.az_animation"+b.id,function(){b.hover=!0,b.start_in_animation()}),a(e).on("mouseleave.az_animation"+b.id,function(){b.hover=!1,b.start_out_animation()})}};b.add_css("vendor/animate.css/animate.min.css",!1,function(){f()})}},update_scroll_animation:function(){return!1},showed:function(a){N.baseclass.prototype.showed.apply(this,arguments),this.an_name="","an_name"in this.attrs&&""!=this.attrs.an_name&&(this.an_name=this.attrs.an_name,qa.elements_instances_by_an_name[this.an_name]=this),"an_start"in this.attrs&&""!=this.attrs.an_start&&"no"!=this.attrs.an_start&&this.animation()},render:function(a){"an_name"in this.attrs&&""!=this.attrs.an_name&&a(this.dom_element).attr("data-an-name",this.attrs.an_name),N.baseclass.prototype.render.apply(this,arguments)}}),qa=new J,Q(),R(function(){T(),a.holdReady(!1)});var Aa=!1;a.fn.glazed_builder=function(b){var c={init:function(b){a.extend({test:"test"},b);return this.each(function(){var b=this,c=a(this).data("glazed_builder");if(!c){var d=a("<div>"+a(b).val()+"</div>")[0];a(d).find("> script").remove(),a(d).find("> link[href]").remove(),a(d).find("> .az-container > script").remove(),a(d).find("> .az-container > link[href]").remove(),a(b).css("display","none");var e=null;if(a(d).find("> .az-container[data-az-type][data-az-name]").length>0)e=a(d).children().insertAfter(b);else{var f="textarea",g=Math.random().toString(36).substr(2);window.glazed_online&&(f=window.glazed_type,g=window.glazed_name),e=a('<div class="az-element az-container" data-az-type="'+f+'" data-az-name="'+g+'"></div>').insertAfter(b),e.append(a(d).html())}window.glazed_title["Save container"]=Drupal.t("Generate HTML and JS for all elements which placed in current container element.");var c=S(e);c&&(ra.push(c),a(b).data("glazed_builder",c),c.save_container=function(){glazed_add_js({path:"jsON-js/json2.min.js",loaded:"JSON"in window,callback:function(){_.defer(function(){if(c.id in qa.elements_instances){var d=c.get_container_html();if(window.glazed_online)a(b).val(d);else{var e=c.attrs.container.split("/")[0],f=c.attrs.container.split("/")[1];a(b).val('<div class="az-element az-container" data-az-type="'+e+'" data-az-name="'+f+'">'+d+"</div>")}}})}})},a(document).on("glazed_add_element",c.save_container),a(document).on("glazed_edited_element",c.save_container),a(document).on("glazed_update_element",c.save_container),a(document).on("glazed_delete_element",c.save_container),a(document).on("glazed_update_sorting",c.save_container))}})},show:function(){this.each(function(){})},hide:function(){this.each(function(){var b=a(this).data("glazed_builder");if(b){qa.delete_element(b.id);for(var c=0;c<b.children.length;c++)b.children[c].remove();a(b.dom_element).remove(),a(this).removeData("glazed_builder"),a(this).css("display","")}})}};return c[b]?c[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error(b):c.init.apply(this,arguments)},O("az_section",!0,U),f(U.prototype,{name:Drupal.t("Section"),icon:"et et-icon-focus",category:Drupal.t("Layout"),params:[G({type:"checkbox",heading:Drupal.t("Full Width"),param_name:"fluid",value:{yes:Drupal.t("Yes")}}),G({type:"checkbox",heading:Drupal.t("100% Height"),param_name:"fullheight",value:{yes:Drupal.t("Yes")}}),G({type:"checkbox",heading:Drupal.t("Vertical Centering"),param_name:"vertical_centering",value:{yes:Drupal.t("Yes")}}),G({type:"dropdown",heading:Drupal.t("Background Effect"),param_name:"effect",tab:Drupal.t("Background Effects"),value:{"":Drupal.t("Simple Image"),fixed:Drupal.t("Fixed Image"),parallax:Drupal.t("Parallax Image"),gradient:Drupal.t("Gradient"),youtube:Drupal.t("YouTube Video")}}),G({type:"bootstrap_slider",heading:Drupal.t("Parallax speed"),param_name:"parallax_speed",tab:Drupal.t("Background Effects"),value:20,dependency:{element:"effect",value:["parallax"]}}),G({type:"dropdown",heading:Drupal.t("Parallax Mode"),param_name:"parallax_mode",tab:Drupal.t("Background Effects"),value:{fixed:Drupal.t("Fixed"),scroll:Drupal.t("Local")},dependency:{element:"effect",value:["parallax"]}}),G({type:"colorpicker",heading:Drupal.t("Start Color"),param_name:"gradient_start_color",tab:Drupal.t("Background Effects"),dependency:{element:"effect",value:["gradient"]}}),G({type:"colorpicker",heading:Drupal.t("End Color"),param_name:"gradient_end_color",tab:Drupal.t("Background Effects"),dependency:{element:"effect",value:["gradient"]}}),G({type:"bootstrap_slider",heading:Drupal.t("Gradient Direction"),param_name:"gradient_direction",tab:Drupal.t("Background Effects"),value:"180",min:"1",max:"360",dependency:{element:"effect",value:["gradient"]}}),G({type:"bootstrap_slider",heading:Drupal.t("Start Position"),param_name:"gradient_start",tab:Drupal.t("Background Effects"),value:"0",dependency:{element:"effect",value:["gradient"]}}),G({type:"bootstrap_slider",heading:Drupal.t("End Position"),param_name:"gradient_end",tab:Drupal.t("Background Effects"),value:"100",dependency:{element:"effect",value:["gradient"]}}),G({type:"checkbox",heading:Drupal.t("Video Play Options"),param_name:"video_options",tab:Drupal.t("Background Effects"),description:Drupal.t("Select options for the video."),value:{loop:Drupal.t("Loop"),mute:Drupal.t("Muted")},dependency:{element:"effect",value:["youtube"]}}),G({type:"textfield",heading:Drupal.t("YouTube Video URL"),param_name:"video_youtube",tab:Drupal.t("Background Effects"),description:Drupal.t("Enter the YouTube video URL."),dependency:{element:"effect",value:["youtube"]}}),G({type:"textfield",heading:Drupal.t("Start Time in seconds"),param_name:"video_start",tab:Drupal.t("Background Effects"),description:Drupal.t("Enter time in seconds from where video start to play."),value:"0",dependency:{element:"effect",value:["youtube"]}}),G({type:"textfield",heading:Drupal.t("Stop Time in seconds"),param_name:"video_stop",tab:Drupal.t("Background Effects"),description:Drupal.t("Enter time in seconds where video ends."),value:"0",dependency:{element:"effect",value:["youtube"]}})].concat(U.prototype.params),is_container:!0,controls_base_position:"top-left",section:!0,get_button:function(){return'<div class="well text-center text-overflow" data-az-element="'+this.base+'"><i class="'+this.icon+'"></i><div>'+this.name+'</div><div class="text-muted small">'+this.description+"</div></div>"},show_controls:function(){if(window.glazed_editor&&(U.baseclass.prototype.show_controls.apply(this,arguments),this.parent instanceof da)){var b=this;a('<div title="'+c("Add Section Below")+'" class="control add-section btn btn-default glyphicon glyphicon-plus-sign" > </div>').appendTo(this.dom_element).click(function(){var a=K.prototype.elements.az_section;new a(b.parent,b.dom_element.index()).update_dom(),b.parent.update_empty()})}},showed:function(a){function b(a){var b=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,c=a.match(b);return!(!c||11!=c[7].length)&&c[7]}U.baseclass.prototype.showed.apply(this,arguments);var c=this;switch(this.attrs.effect){case"parallax":this.add_js_list({paths:["vendor/jquery.parallax/jquery.parallax.js","vendor/jquery.waypoints/lib/jquery.waypoints.min.js"],loaded:"waypoint"in a.fn&&"parallax"in a.fn,callback:function(){a(c.dom_element).waypoint(function(b){var d=a(c.dom_element).css("background-position"),e=d.match(/([\w%]*) [\w%]/);if(null==e)var f="50%";else var f=e[1];a(c.dom_element).css("background-attachment",c.attrs.parallax_mode),a(c.dom_element).css("background-position",f+" 0"),a(c.dom_element).parallax(f,c.attrs.parallax_speed/100)},{offset:"100%",handler:function(a){this.destroy()}}),a(document).trigger("scroll")}});break;case"fixed":a(c.dom_element).css("background-attachment","fixed");break;case"youtube":var d=_.indexOf(c.attrs.video_options.split(","),"loop")>=0,e=_.indexOf(c.attrs.video_options.split(","),"mute")>=0;this.add_css("vendor/jquery.mb.YTPlayer/dist/css/jquery.mb.YTPlayer.min.css","mb_YTPlayer"in a.fn,function(){}),this.add_js_list({paths:["vendor/jquery.mb.YTPlayer/dist/jquery.mb.YTPlayer.min.js","vendor/jquery.waypoints/lib/jquery.waypoints.min.js"],loaded:"waypoint"in a.fn&&"mb_YTPlayer"in a.fn,callback:function(){a(c.dom_element).waypoint(function(f){a(c.dom_element).attr("data-property","{videoURL:'"+b(c.attrs.video_youtube)+"',containment:'[data-az-id="+c.id+"]', showControls:false, autoPlay:true, stopMovieOnBlur:false, loop:"+d.toString()+", mute:"+e.toString()+", startAt:"+c.attrs.video_start+", stopAt:"+c.attrs.video_stop+", opacity:1, addRaster:false}"),a(c.dom_element).mb_YTPlayer(),a(c.dom_element).playYTP()},{offset:"300%",handler:function(a){this.destroy()}}),a(document).trigger("scroll")}})}},render:function(a){if(this.dom_element=a('<div id="'+this.id+'" class="az-element az-section '+this.get_el_classes()+' " style="'+this.attrs.style+'"></div>'),"yes"==this.attrs.fullheight&&a(this.dom_element).css("height","100vh"),"yes"==this.attrs.fluid?this.dom_content_element=a('<div class="az-ctnr container-fluid"></div>').appendTo(this.dom_element):this.dom_content_element=a('<div class="az-ctnr container"></div>').appendTo(this.dom_element),"gradient"==this.attrs.effect){var b="linear-gradient("+this.attrs.gradient_direction+"deg, "+this.attrs.gradient_start_color+" "+this.attrs.gradient_start+"%, "+this.attrs.gradient_end_color+" "+this.attrs.gradient_end+"%)";a(this.dom_element).css("background-image")?a(this.dom_element).css("background-image",b+","+a(this.dom_element).css("background-image")):a(this.dom_element).css("background-image",b)}this.attrs.vertical_centering&&"yes"===this.attrs.vertical_centering&&a(this.dom_element).addClass("az-util-vertical-centering"),U.baseclass.prototype.render.apply(this,arguments)}}),O("az_row",!0,V),f(V.prototype,{name:Drupal.t("Row"),icon:"et et-icon-grid",category:Drupal.t("Layout"),params:[G({type:"dropdown",heading:Drupal.t("Device breakpoint"),param_name:"device",value:{xs:Drupal.t("Extra small devices Phones (<768px)"),sm:Drupal.t("Small devices Tablets (768px)"),md:Drupal.t("Medium devices Desktops (992px)"),lg:Drupal.t("Large devices Desktops (1200px)")},description:Drupal.t("Bootstrap responsive grid breakpoints")}),G({type:"checkbox",heading:Drupal.t("Equal Height Columns"),param_name:"equal",value:{yes:Drupal.t("Yes")}})].concat(V.prototype.params),is_container:!0,controls_base_position:"top-left",get_button:function(){return'<div class="well text-center text-overflow" data-az-element="'+this.base+'"><i class="'+this.icon+'"></i><div>'+this.name+'</div><div class="text-muted small">'+this.description+"</div></div>"},show_controls:function(){if(window.glazed_editor){V.baseclass.prototype.show_controls.apply(this,arguments),this.controls.find(".add").remove(),this.controls.find(".paste").remove();for(var b=this,d=this.controls,e='<div class="row-layouts clearfix">',f=["1/1","1/2 + 1/2","1/3 + 1/3 + 1/3","1/4 + 1/4 + 1/4 + 1/4","1/6 + 1/6 + 1/6 + 1/6 + 1/6 + 1/6","1/4 + 1/2 + 1/4","1/6 + 4/6 + 1/6","1/4 + 3/4","3/4 + 1/4","2/3 + 1/3","1/3 + 2/3","5/12 + 7/12"],g="",i=0;i<f.length;i++){e+='<div title="'+c("Set "+f[i]+" colums")+'" " data-az-columns="'+f[i]+'" class="az-mini-container control set-columns-layout"><div class="row">',g=f[i].replace(" ","").split("+");for(var j=0;j<g.length;j++)e+='<div class="'+h(g[j],"xs")+'"><div class="content"></div></div>';e+="</div>",e+="</div>"}e+='<small class="az-row-custom set-columns-layout"><a href="#" class="custom-row-control glazed-util-text-muted text-small">Custom layout</a></small>',e+="</div>";var k=a('<span title="'+c("Set row layout")+'" class="control set-columns btn btn-default glyphicon glyphicon-th"> </span>').insertAfter(this.controls.find(".drag-and-drop"))[na+"popover"]({container:!1,selector:!1,placement:"right",html:"true",trigger:"manual",content:e}).click(function(){a(k)[na+"popover"]("toggle"),l(a(d)),l(a(d).find(".popover")),a(d).find(".popover .set-columns-layout").each(function(){a(this).click({object:b},b.click_set_columns)}),b.controls.find(".popover").mouseleave(function(){a(k)[na+"popover"]("hide"),a(k).css("display","")})})}},update_sortable:function(){window.glazed_editor&&a(this.dom_element).sortable({axis:"x",items:"> .az-column",handle:"> .controls > .drag-and-drop",update:this.update_sorting,placeholder:"az-sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",distance:1,over:function(a,b){b.placeholder.attr("class",b.helper.attr("class")),b.placeholder.removeClass("ui-sortable-helper"),b.placeholder.addClass("az-sortable-placeholder")}})},update_sorting:function(b,c){V.baseclass.prototype.update_sorting.apply(this,arguments);var d=qa.get_element(a(this).closest("[data-az-id]").attr("data-az-id"));if(d)for(var e=0;e<d.children.length;e++)d.children[e].update_empty()},update_dom:function(){V.baseclass.prototype.update_dom.apply(this,arguments);for(var a=0;a<this.children.length;a++)this.children[a].update_dom()},click_set_columns:function(b){var c=a(this).attr("data-az-columns");if(""==c||void 0==c){if(""==b.data.object.columns){c=[];for(var d=0;d<b.data.object.children.length;d++)c.push(b.data.object.children[d].attrs.width);b.data.object.columns=c.join(" + ")}c=window.prompt(Drupal.t("Enter bootstrap grid layout. For example 1/2 + 1/2."),b.data.object.columns)}return""!=c&&null!=c&&b.data.object.set_columns(c),!1},set_columns:function(a){this.columns=a;var b=a.replace(" ","").split("+");if(0==this.children.length)for(var c=0;c<b.length;c++){var d=new W(this,!0);d.update_dom(),d.update_width(b[c])}else if(this.children.length==b.length)for(var c=0;c<b.length;c++)this.children[c].update_width(b[c]);else if(this.children.length>b.length){for(var e=this.children[b.length-1],c=0;c<this.children.length;c++)if(c<b.length)this.children[c].update_width(b[c]);else{for(var f=this.children[c],g=0;g<f.children.length;g++)f.children[g].parent=e,e.children.push(f.children[g]);f.children=[]}e.update_dom();for(var h=this.children.slice(b.length,this.children.length),c=0;c<h.length;c++)h[c].remove()}else for(var c=0;c<b.length;c++)if(c<this.children.length)this.children[c].update_width(b[c]);else{var d=new W(this,!0);d.update_dom(),d.update_width(b[c])}this.update_sortable()},showed:function(a){V.baseclass.prototype.showed.apply(this,arguments)},render:function(a){this.dom_element=a('<div class="az-element az-row row '+this.get_el_classes()+'" style="'+this.attrs.style+'"></div>'),this.dom_content_element=this.dom_element,a(this.dom_element).addClass("az-row--"+this.attrs.device),this.attrs.equal&&"yes"===this.attrs.equal&&a(this.dom_element).addClass("az-row--equal-height"),V.baseclass.prototype.render.apply(this,arguments)}}),L("az_column",!0,W),f(W.prototype,{name:Drupal.t("Column"),params:[G({type:"textfield",heading:Drupal.t("Column with"),param_name:"width",hidden:!0}),G({type:"checkbox",heading:Drupal.t("Vertical Centering"),param_name:"vertical_centering",value:{yes:Drupal.t("Yes")}})].concat(W.prototype.params),hidden:!0,is_container:!0,controls_base_position:"top-left",show_parent_controls:!0,show_controls:function(){window.glazed_editor&&(W.baseclass.prototype.show_controls.apply(this,arguments),this.controls.find(".clone").remove(),this.controls.find(".copy").remove(),this.controls.find(".remove").remove())},get_my_shortcode:function(){return this.get_children_shortcode()},update_width:function(b){a(this.dom_element).removeClass(h(this.attrs.width,this.parent.attrs.device)),this.attrs.width=b,a(this.dom_element).addClass(h(this.attrs.width,this.parent.attrs.device)),a(document).trigger("glazed_update_element",this.id)},render:function(a){this.dom_element=a('<div class="az-element az-ctnr az-column '+this.get_el_classes()+" "+h(this.attrs.width,this.parent.attrs.device)+'" style="'+this.attrs.style+'"></div>'),this.dom_content_element=this.dom_element,this.attrs.vertical_centering&&"yes"===this.attrs.vertical_centering&&a(this.dom_element).addClass("az-util-vertical-centering"),W.baseclass.prototype.render.apply(this,arguments)}}),O("az_tabs",!0,X),f(X.prototype,{name:Drupal.t("Tabs"),icon:"pe pe-7s-folder",category:Drupal.t("Layout"),params:[G({type:"dropdown",heading:Drupal.t("Tab direction"),param_name:"az_dirrection",value:{"":Drupal.t("Default"),"tabs-left":Drupal.t("Left"),"tabs-right":Drupal.t("Right")}})].concat(X.prototype.params),is_container:!0,controls_base_position:"top-left",get_button:function(){return'<div class="well text-center text-overflow" data-az-element="'+this.base+'"><i class="'+this.icon+'"></i><div>'+this.name+'</div><div class="text-muted small">'+this.description+"</div></div>"},show_controls:function(){window.glazed_editor&&(X.baseclass.prototype.show_controls.apply(this,arguments),this.controls.find(".add").remove(),this.controls.find(".paste").remove(),a('<span title="'+c("Add tab")+'" class="control add-tab btn btn-default glyphicon glyphicon-plus-sign" > </span>').appendTo(this.controls).click({object:this},this.click_add_tab))},update_sortable:function(){window.glazed_editor&&a(this.dom_element).sortable({axis:"x",items:"> ul > li",update:this.update_sorting,placeholder:"az-sortable-placeholder",forcePlaceholderSize:!0,over:function(a,b){b.placeholder.attr("class",b.helper.attr("class")),b.placeholder.removeClass("ui-sortable-helper"),b.placeholder.addClass("az-sortable-placeholder")}})},update_sorting:function(b,c){var d=qa.get_element(a(this).attr("data-az-id"));if(d){var e=a(this).sortable("option"),f=[];a(this).find(e.items).each(function(){var b=a(this).find('a[data-toggle="tab"]').attr("href").replace("#","");f.push(qa.get_element(b))}),d.children=f;for(var g=0;g<d.children.length;g++)d.children[g].parent=d;d.update_dom(),a(document).trigger("glazed_update_sorting",c)}},click_add_tab:function(a){return a.data.object.add_tab(),!1},add_tab:function(){var b=new Y(this,!1);b.update_dom(),this.update_dom(),a(this.dom_element).find('a[href="#'+b.id+'"]')[na+"tab"]("show")},showed:function(a){X.baseclass.prototype.showed.apply(this,arguments),a(this.dom_element).find("ul.nav-tabs li:first a")[na+"tab"]("show")},render:function(a){this.dom_element=a('<div class="az-element az-tabs tabbable '+this.get_el_classes()+this.attrs.az_dirrection+'" style="'+this.attrs.style+'"></div>');for(var b='<ul class="nav nav-tabs" role="tablist">',c=0;c<this.children.length;c++)b+='<li><a href="#'+this.children[c].id+'" role="tab" data-toggle="tab">'+this.children[c].attrs.title+"</a></li>";b+="</ul>",a(this.dom_element).append(b);var d='<div id="'+this.id+'" class="tab-content"></div>';this.dom_content_element=a(d).appendTo(this.dom_element),X.baseclass.prototype.render.apply(this,arguments)}}),L("az_tab",!0,Y),f(Y.prototype,{name:Drupal.t("Tab"),params:[G({type:"textfield",heading:Drupal.t("Tab title"),param_name:"title",value:Drupal.t("Title")})].concat(Y.prototype.params),hidden:!0,is_container:!0,controls_base_position:"top-left",get_empty:function(){return'<div class="az-empty"><div class="top-left well"><h1></h1><span class="glyphicon glyphicon-plus-sign"></span>'+Drupal.t(" add a new tab.")+" "+Drupal.t("Drag tab headers to change order.")+"</div></div>"},show_controls:function(){window.glazed_editor&&(Y.baseclass.prototype.show_controls.apply(this,arguments),this.controls.find(".drag-and-drop").remove(),a('<span class="control btn btn-default glyphicon">'+this.name+"</span>").prependTo(this.controls))},get_my_shortcode:function(){return this.get_children_shortcode()},edited:function(b){Y.baseclass.prototype.edited.apply(this,arguments),this.parent.update_dom(),a('a[href="#'+this.id+'"]')[na+"tab"]("show")},clone:function(){var b=Y.baseclass.prototype.get_my_shortcode.apply(this,arguments);a("#glazed-clipboard").html(encodeURIComponent(b)),this.parent.paste(this.parent.children.length),this.parent.update_dom()},remove:function(){Y.baseclass.prototype.remove.apply(this,arguments),this.parent.update_dom()},render:function(a){this.dom_element=a('<div id="'+this.id+'" class="az-element az-ctnr az-tab tab-pane '+this.get_el_classes()+'" style="'+this.attrs.style+'"></div>'),this.dom_content_element=this.dom_element,Y.baseclass.prototype.render.apply(this,arguments)}}),O("az_accordion",!0,Z),f(Z.prototype,{name:Drupal.t("Collapsibles"),icon:"pe pe-7s-menu",category:Drupal.t("Layout"),params:[G({type:"checkbox",heading:Drupal.t("Collapsed?"),param_name:"collapsed",value:{yes:Drupal.t("Yes")}})].concat(Z.prototype.params),is_container:!0,controls_base_position:"top-left",get_button:function(){return'<div class="well text-center text-overflow" data-az-element="'+this.base+'"><i class="'+this.icon+'"></i><div>'+this.name+'</div><div class="text-muted small">'+this.description+"</div></div>"},show_controls:function(){window.glazed_editor&&(Z.baseclass.prototype.show_controls.apply(this,arguments),this.controls.find(".add").remove(),this.controls.find(".paste").remove(),a('<span title="'+c("Add toggle")+'" class="control add-toggle btn btn-default glyphicon glyphicon-plus-sign" > </span>').appendTo(this.controls).click({object:this},this.click_add_toggle))},update_sortable:function(){window.glazed_editor&&a(this.dom_element).sortable({axis:"y",items:"> .az-toggle",handle:"> .controls > .drag-and-drop",update:this.update_sorting,placeholder:"az-sortable-placeholder",forcePlaceholderSize:!0,over:function(a,b){b.placeholder.attr("class",b.helper.attr("class")),b.placeholder.removeClass("ui-sortable-helper"),b.placeholder.addClass("az-sortable-placeholder")}})},click_add_toggle:function(a){return a.data.object.add_toggle(),!1},add_toggle:function(){new $(this,!1).update_dom(),this.update_dom()},update_dom:function(){for(var a=0;a<this.children.length;a++)this.children[a].update_dom();Z.baseclass.prototype.update_dom.apply(this,arguments)},showed:function(a){Z.baseclass.prototype.showed.apply(this,arguments),a(this.dom_element).find("> .az-toggle > .in").removeClass(ma+"in"),a(this.dom_element).find("> .az-toggle > .collapse:not(:first)")[na+"collapse"]({toggle:!1,parent:"#"+this.id}),a(this.dom_element).find("> .az-toggle > .collapse:first")[na+"collapse"]({toggle:"yes"!=this.attrs.collapsed,parent:"#"+this.id})},render:function(a){this.dom_element=a('<div id="'+this.id+'" class="az-element az-accordion panel-group '+this.get_el_classes()+'" style="'+this.attrs.style+'"></div>'),this.dom_content_element=this.dom_element,Z.baseclass.prototype.render.apply(this,arguments)}}),L("az_toggle",!0,$),f($.prototype,{name:Drupal.t("Toggle"),params:[G({type:"textfield",heading:Drupal.t("Toggle title"),param_name:"title",value:Drupal.t("Title")})].concat($.prototype.params),hidden:!0,is_container:!0,controls_base_position:"top-left",get_empty:function(){return'<div class="az-empty"><div class="top-left well"><h1></h1><span class="glyphicon glyphicon-plus-sign"></span>'+Drupal.t(" add a new toggle.")+"</div></div>"},get_my_shortcode:function(){return this.get_children_shortcode()},clone:function(){var b=$.baseclass.prototype.get_my_shortcode.apply(this,arguments);a("#glazed-clipboard").html(encodeURIComponent(b)),this.parent.paste(this.parent.children.length)},render:function(a){var b="panel-default";""!=this.parent.attrs.type&&(b=this.parent.attrs.type),this.dom_element=a('<div class="az-element az-toggle panel '+b+" "+this.get_el_classes()+'" style="'+this.attrs.style+'"><div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#'+this.parent.id+'" href="#'+this.id+'">'+this.attrs.title+'</a></h4></div><div id="'+this.id+'" class="panel-collapse collapse"><div class="panel-body az-ctnr"></div></div></div>'),this.dom_content_element=a(this.dom_element).find(".panel-body"),$.baseclass.prototype.render.apply(this,arguments)}}),O("az_carousel",!0,aa),f(aa.prototype,{name:Drupal.t("Carousel"),icon:"pe pe-7s-more",category:Drupal.t("Layout"),params:[G({type:"bootstrap_slider",heading:Drupal.t("Frames per slide"),param_name:"items",min:"1",max:"10",value:"1"}),G({type:"checkbox",heading:Drupal.t("Disable Auto Play"),param_name:"autoplay",value:{yes:Drupal.t("Yes")}}),G({type:"checkbox",heading:Drupal.t("Dots Navigation"),param_name:"pagination",tab:"Dots",value:{on:Drupal.t("On")}}),G({type:"dropdown",heading:Drupal.t("Dots Orientation"),param_name:"pagination_orientation",tab:"Dots",value:{outside:Drupal.t("Outside Slider"),inside:Drupal.t("Inside Slider")},dependency:{element:"pagination",not_empty:{}}}),G({type:"dropdown",heading:Drupal.t("Shape"),param_name:"pagination_shape",tab:"Dots",value:{circle:Drupal.t("Circle"),square:Drupal.t("Square"),triangle:Drupal.t("Triangle"),bar:Drupal.t("Bar")},dependency:{element:"pagination",not_empty:{}}}),G({type:"dropdown",heading:Drupal.t("Transform Active"),param_name:"pagination_transform",tab:"Dots",value:{"":Drupal.t("None"),growTaller:Drupal.t("Grow Taller"),growWider:Drupal.t("Grow Wider"),scaleUp:Drupal.t("Scale up")},dependency:{element:"pagination",not_empty:{}}}),G({type:"colorpicker",heading:Drupal.t("Dots Color"),param_name:"pagination_color",tab:"Dots",dependency:{element:"pagination",not_empty:{}}}),G({type:"colorpicker",heading:Drupal.t("Active Dot Color"),param_name:"pagination_active_color",tab:"Dots",dependency:{element:"pagination",not_empty:{}}}),G({type:"checkbox",heading:Drupal.t("Next/Previous"),param_name:"navigation",tab:"Next/Previous",value:{on:Drupal.t("On")}}),G({type:"dropdown",heading:Drupal.t("Orientation"),param_name:"navigation_orientation",tab:"Next/Previous",value:{outside:Drupal.t("Outside Slider"),inside:Drupal.t("Inside Slider")},dependency:{element:"navigation",not_empty:{}}}),G({type:"dropdown",heading:Drupal.t("Shape"),param_name:"navigation_shape",tab:"Next/Previous",value:{"":Drupal.t("No Background"),circle:Drupal.t("Circle"),square:Drupal.t("Square"),bar:Drupal.t("Bar")},dependency:{element:"navigation",not_empty:{}}}),G({type:"colorpicker",heading:Drupal.t("Icon Color"),param_name:"navigation_icon_color",tab:"Next/Previous",dependency:{element:"navigation",not_empty:{}}}),G({type:"colorpicker",heading:Drupal.t("Icon Hover Color"),param_name:"navigation_icon_hover_color",tab:"Next/Previous",dependency:{element:"navigation",not_empty:{}}}),G({type:"colorpicker",heading:Drupal.t("Background Color"),param_name:"navigation_background_color",tab:"Next/Previous",dependency:{element:"navigation",not_empty:{}}}),G({type:"colorpicker",heading:Drupal.t("Background Hover"),param_name:"navigation_background_hover_color",tab:"Next/Previous",dependency:{element:"navigation",not_empty:{}}}),G({type:"bootstrap_slider",heading:Drupal.t("Icon Thickness"),param_name:"navigation_thickness",tab:"Next/Previous",min:"1",max:"10",value:"2",dependency:{element:"navigation",not_empty:{}}}),G({type:"dropdown",heading:Drupal.t("Outside Navigation Position"),param_name:"navigation_position",tab:"Next/Previous",value:{adjacent:Drupal.t("Adjacent"),topLeft:Drupal.t("Top Left"),topRight:Drupal.t("Top Right"),bottomCenter:Drupal.t("Bottom Center"),bottomLeft:Drupal.t("Bottom Left"),bottomRight:Drupal.t("Bottom Right")},dependency:{element:"navigation",not_empty:{}}}),G({type:"bootstrap_slider",heading:Drupal.t("Auto Play Interval"),param_name:"interval",min:"1000",max:"20000",value:"5000",step:"100"}),G({type:"dropdown",heading:Drupal.t("Transition style"),param_name:"transition",value:{"":Drupal.t("Default"),fade:Drupal.t("fade"),backSlide:Drupal.t("backSlide"),goDown:Drupal.t("goDown"),fadeUp:Drupal.t("fadeUp")}}),G({type:"checkbox",heading:Drupal.t("Stop on Hover"),param_name:"stoponhover",value:{on:Drupal.t("On")}}),G({type:"checkbox",hidden:!0,heading:Drupal.t("Options"),param_name:"options",value:{navigation:Drupal.t("Navigation"),auto_play:Drupal.t("Auto play"),mouse:Drupal.t("Mouse drag"),touch:Drupal.t("Touch drag")}})].concat(aa.prototype.params),is_container:!0,controls_base_position:"top-left",show_settings_on_create:!0,frontend_render:!0,get_button:function(){return'<div class="well text-center text-overflow" data-az-element="'+this.base+'"><i class="'+this.icon+'"></i><div>'+this.name+'</div><div class="text-muted small">'+this.description+"</div></div>"},show_controls:function(){if(window.glazed_editor){aa.baseclass.prototype.show_controls.apply(this,arguments),this.controls.find(".add").remove(),this.controls.find(".paste").remove();a('<span title="'+c("Add slide")+'" class="control add-toggle btn btn-default glyphicon glyphicon-plus-sign" > </span>').appendTo(this.controls).click({object:this},this.click_add_slide)}},update_sortable:function(){},click_add_slide:function(a){return a.data.object.add_slide(),!1},add_slide:function(){new ba(this,!0).update_dom(),this.update_dom()},showed:function(a){aa.baseclass.prototype.showed.apply(this,arguments);var b=function(a){var b="[data-az-id="+a.id+"] .st-owl-theme";return output='<style id="carousel-style-'+a.id+'">\x3c!-- ',"triangle"==a.attrs.pagination_shape?(output+=b+" .owl-page {background:transparent !important; border-bottom-color: "+a.attrs.pagination_color+" !important}",output+=b+" .owl-page.active {background:transparent !important; border-bottom-color: "+a.attrs.pagination_active_color+" !important}"):(output+=b+" .owl-page {background: "+a.attrs.pagination_color+" !important}",output+=b+" .owl-page.active {background: "+a.attrs.pagination_active_color+" !important}"),output+=b+" .owl-buttons .owl-prev::after, "+b+" .owl-buttons .owl-next::after,"+b+" .owl-buttons .owl-prev::before, "+b+" .owl-buttons .owl-next::before {background: "+a.attrs.navigation_icon_color+";width: "+a.attrs.navigation_thickness+"px;}",output+=b+" .owl-buttons .owl-prev:hover::after, "+b+" .owl-buttons .owl-next:hover::after,"+b+" .owl-buttons .owl-prev:hover::before, "+b+" .owl-buttons .owl-next:hover::before {background: "+a.attrs.navigation_icon_hover_color+"}",output+=b+" .owl-buttons .owl-prev, "+b+" .owl-buttons .owl-next {background: "+a.attrs.navigation_background_color+";border-color: "+a.attrs.navigation_background_color+" }",output+=b+" .owl-buttons .owl-prev:hover, "+b+" .owl-buttons .owl-next:hover {background: "+a.attrs.navigation_background_hover_color+";border-color: "+a.attrs.navigation_background_hover_color+" }",output+=" --\x3e</style>",output};this.add_css("vendor/owl.carousel/owl-carousel/owl.carousel.css","owlCarousel"in a.fn,function(){}),this.add_css("css/st-owl-carousel.css","owlCarousel"in a.fn,function(){}),this.add_css("vendor/owl.carousel/owl-carousel/owl.transitions.css","owlCarousel"in a.fn,function(){});var c=this;this.add_js({path:"vendor/owl.carousel/owl-carousel/owl.carousel.js",loaded:"owlCarousel"in a.fn,callback:function(){var d=function(b){var c=null;c="userItems"in b?b.userItems:b.$userItems;var d=null;d="visibleItems"in b?b.visibleItems:b.$visibleItems;for(var e=0;e<c.length;e++)if(_.indexOf(d,e)<0){var f=c[e],g=a(f).attr("data-az-id"),h=qa.get_element(g);_.isUndefined(h)||"trigger_start_out_animation"in h&&h.trigger_start_out_animation()}for(var e=0;e<d.length;e++)if(d[e]<c.length){var f=c[d[e]],g=a(f).attr("data-az-id"),h=qa.get_element(g);_.isUndefined(h)||"trigger_start_in_animation"in h&&h.trigger_start_in_animation()}},e="st-owl-theme";c.attrs.pagination&&(c.attrs.pagination_orientation&&(e+=" st-owl-pager-"+c.attrs.pagination_orientation),c.attrs.pagination_shape&&(e+=" st-owl-pager-"+c.attrs.pagination_shape),c.attrs.pagination_transform&&(e+=" st-owl-pager-"+c.attrs.pagination_transform)),c.attrs.navigation&&(c.attrs.navigation_orientation&&(e+=" st-owl-navigation-"+c.attrs.navigation_orientation),c.attrs.navigation_shape&&(e+=" st-owl-navigation-"+c.attrs.navigation_shape),c.attrs.navigation_position&&(e+=" st-owl-navigation-"+c.attrs.navigation_position));var f=!1;!Boolean(c.attrs.autoplay)&&c.attrs.interval>0&&(f=c.attrs.interval),a(c.dom_content_element).owlCarousel({addClassActive:!0,afterAction:function(){d(this.owl)},afterMove:function(){},autoPlay:f,beforeMove:function(){},items:c.attrs.items,mouseDrag:!0,navigation:Boolean(c.attrs.navigation),navigationText:!1,pagination:Boolean(c.attrs.pagination),singleItem:"1"==c.attrs.items,startDragging:function(){},stopOnHover:Boolean(c.attrs.stopOnHover),theme:e,touchDrag:!0,transitionStyle:""!=c.attrs.transition&&c.attrs.transition}),d(c.dom_content_element.data("owlCarousel")),"outside"!=c.attrs.navigation_orientation||"topLeft"!=c.attrs.navigation_position&&"topRight"!=c.attrs.navigation_position&&"topCenter"!=c.attrs.navigation_position||a(c.dom_content_element).find(".owl-buttons").prependTo(a(c.dom_content_element)),a("head").find("#carousel-style-"+c.id).remove(),a("head").append(b(c))}})},render:function(a){this.dom_element=a('<div id="'+this.id+'" class="az-element az-carousel '+this.get_el_classes()+'" style="'+this.attrs.style+'"></div>'),this.dom_content_element=a("<div></div>").appendTo(this.dom_element),aa.baseclass.prototype.render.apply(this,arguments)}}),L("az_slide",!0,ba),f(ba.prototype,{name:Drupal.t("Slide"),params:[].concat(ba.prototype.params),hidden:!0,is_container:!0,show_parent_controls:!0,controls_base_position:"top-left",get_empty:function(){return'<div class="az-empty"><div class="top-left well"><h1></h1><span class="glyphicon glyphicon-plus-sign"></span>'+Drupal.t(" add a new slide.")+"</div></div>"},show_controls:function(){window.glazed_editor&&(ba.baseclass.prototype.show_controls.apply(this,arguments),this.controls.find(".clone").remove(),this.controls.find(".drag-and-drop").remove(),a('<span class="control btn btn-default glyphicon">'+this.name+"</span>").prependTo(this.controls))},get_my_shortcode:function(){return this.get_children_shortcode()},edited:function(){ba.baseclass.prototype.edited.apply(this,arguments),this.parent.update_dom()},render:function(a){""!=this.parent.attrs.type&&this.parent.attrs.type,this.dom_element=a('<div class="az-element az-slide az-ctnr '+this.get_el_classes()+' clearfix" style="'+this.attrs.style+'"></div>'),this.dom_content_element=this.dom_element,ba.baseclass.prototype.render.apply(this,arguments)}}),O("az_layers",!0,ca),f(ca.prototype,{name:Drupal.t("Positioned Layers"),icon:"et et-icon-layers",description:Drupal.t("Free Positioning"),category:Drupal.t("Layout"),params:[G({type:"textfield",heading:Drupal.t("Width"),param_name:"width",description:Drupal.t("For example 100px, or 50%."),value:"100%"}),G({type:"bootstrap_slider",heading:Drupal.t("Height"),param_name:"height",max:"10000",value:"500"}),G({type:"checkbox",heading:Drupal.t("Responsive?"),param_name:"responsive",value:{yes:Drupal.t("Yes")}}),G({type:"bootstrap_slider",heading:Drupal.t("Original width"),param_name:"o_width",hidden:!0})].concat(ca.prototype.params),show_settings_on_create:!0,is_container:!0,controls_base_position:"top-left",disallowed_elements:["az_layers"],get_button:function(){return'<div class="well text-center text-overflow" data-az-element="'+this.base+'"><i class="'+this.icon+'"></i><div>'+this.name+'</div><div class="text-muted small">'+this.description+"</div></div>"},zindex_normalize:function(){for(var b=[],c=0;c<this.children.length;c++)isNaN(parseInt(this.children[c].attrs.pos_zindex))&&(this.children[c].attrs.pos_zindex=0),b.push(parseInt(this.children[c].attrs.pos_zindex));b=_.sortBy(b,function(a){return a}),b=_.uniq(b);for(var c=0;c<this.children.length;c++){var d=_.sortedIndex(b,parseInt(this.children[c].attrs.pos_zindex));a(this.children[c].dom_element).css("z-index",d),this.children[c].attrs.pos_zindex=d}},update_sortable:function(){function b(b){var c=a(b).closest("[data-az-id]").attr("data-az-id"),f=qa.get_element(c);f.attrs.pos_left=parseInt(a(b).css("left"))/(a(e.dom_content_element).width()/100)+"%",f.attrs.pos_top=parseInt(a(b).css("top"))/(a(e.dom_content_element).height()/100)+"%",f.attrs.pos_width=parseInt(a(b).css("width"))/(a(e.dom_content_element).width()/100)+"%",f.attrs.pos_height=parseInt(a(b).css("height"))/(a(e.dom_content_element).height()/100)+"%",d(b),e.attrs.o_width=a(e.dom_element).width(),a(document).trigger("glazed_update_element",c)}function d(b){a(b).css("left",parseInt(a(b).css("left"))/(a(e.dom_content_element).width()/100)+"%"),a(b).css("top",parseInt(a(b).css("top"))/(a(e.dom_content_element).height()/100)+"%"),a(b).css("width",parseInt(a(b).css("width"))/(a(e.dom_content_element).width()/100)+"%"),a(b).css("height",parseInt(a(b).css("height"))/(a(e.dom_content_element).height()/100)+"%")}if(window.glazed_editor){var e=this;e.zindex_normalize(),a(this.dom_content_element).resizable({start:function(a,b){for(var c=0;c<e.children.length;c++){d(e.children[c].dom_element)}},stop:function(b,c){e.attrs.width=parseInt(a(e.dom_content_element).css("width"))/(a(e.dom_element).width()/100)+"%",a(e.dom_content_element).width(e.attrs.width),e.attrs.height=a(e.dom_content_element).height(),a(document).trigger("glazed_update_element",e.id)}});for(var f=0;f<this.children.length;f++)a.isNumeric(a(this.children[f].dom_element).css("z-index"))||a(this.children[f].dom_element).css("z-index",0),null==this.children[f].controls&&this.children[f].show_controls(),null==this.children[f].attrs.pos_top&&(this.children[f].attrs.pos_top="50%"),null==this.children[f].attrs.pos_left&&(this.children[f].attrs.pos_left="50%"),null==this.children[f].attrs.pos_width&&(this.children[f].attrs.pos_width="50%"),null==this.children[f].attrs.pos_height&&(this.children[f].attrs.pos_height="50%"),0==this.children[f].controls.find(".width100").length&&a('<span title="'+c("100% width")+'" class="control width100 btn btn-default glyphicon glyphicon-resize-horizontal" > </span>').appendTo(this.children[f].controls).click({object:this.children[f]},function(b){return b.data.object.attrs.pos_left="0%",a(b.data.object.dom_element).css("left","0%"),b.data.object.attrs.pos_width="100%",a(b.data.object.dom_element).css("width","100%"),!1}),0==this.children[f].controls.find(".heigth100").length&&a('<span title="'+c("100% heigth")+'" class="control heigth100 btn btn-default glyphicon glyphicon-resize-vertical" > </span>').appendTo(this.children[f].controls).click({object:this.children[f]},function(b){return b.data.object.attrs.pos_top="0%",a(b.data.object.dom_element).css("top","0%"),b.data.object.attrs.pos_height="100%",a(b.data.object.dom_element).css("height","100%"),!1}),0==this.children[f].controls.find(".forward").length&&a('<span title="'+c("Bring forward")+'" class="control forward btn btn-default glyphicon glyphicon-arrow-up" > </span>').appendTo(this.children[f].controls).click({object:this.children[f]},function(b){return a.isNumeric(a(b.data.object.dom_element).css("z-index"))?(a(b.data.object.dom_element).css("z-index",Math.round(a(b.data.object.dom_element).css("z-index"))+1),b.data.object.attrs.pos_zindex=a(b.data.object.dom_element).css("z-index")):(a(b.data.object.dom_element).css("z-index",0),b.data.object.attrs.pos_zindex=0),e.zindex_normalize(),!1}),0==this.children[f].controls.find(".backward").length&&a('<span title="'+c("Send backward")+'" class="control backward btn btn-default glyphicon glyphicon-arrow-down" > </span>').appendTo(this.children[f].controls).click({object:this.children[f]},function(b){return a.isNumeric(a(b.data.object.dom_element).css("z-index"))?Math.round(a(b.data.object.dom_element).css("z-index"))>0&&(a(b.data.object.dom_element).css("z-index",Math.round(a(b.data.object.dom_element).css("z-index"))-1),b.data.object.attrs.pos_zindex=a(b.data.object.dom_element).css("z-index")):(a(b.data.object.dom_element).css("z-index",0),b.data.object.attrs.pos_zindex=0),e.zindex_normalize(),!1}),a(this.children[f].dom_element).draggable({handle:"> .controls > .drag-and-drop",containment:"#"+this.id,scroll:!1,snap:"#"+this.id+", .az-element",stop:function(a,c){b(this)}}),a(this.children[f].dom_element).resizable({containment:"#"+this.id,stop:function(a,c){b(this)}})}},show_controls:function(){if(window.glazed_editor){ca.baseclass.prototype.show_controls.apply(this,arguments),this.update_sortable();var b=this;a(this.dom_content_element).dblclick(function(a){1==a.which&&qa.show(b,function(b){b.attrs.pos_top=a.offsetY.toString()+"px",b.attrs.pos_left=a.offsetX.toString()+"px"})})}},attach_children:function(){ca.baseclass.prototype.attach_children.apply(this,arguments),window.glazed_editor&&this.update_sortable()},showed:function(a){function b(a,b){var c="",d=a.attrs[b].match(/font-size[: ]*([\-\d\.]*)(px|%|em) *;/);return null!=d&&(c=d[1]),c}function c(e,f){var g=b(e,"style");""!=g&&(g*=f,a(e.dom_element).css("font-size",g+"px"));for(var h=0;h<e.children.length;h++)c(d.children[h],f)}ca.baseclass.prototype.showed.apply(this,arguments);var d=this;a(window).off("resize.az_layers"+d.id),"yes"==this.attrs.responsive&&(a(window).on("resize.az_layers"+d.id,function(){var b=a(d.dom_element).width();"o_width"in d.attrs&&""!=d.attrs.o_width||(d.attrs.o_width=b);var e=b/d.attrs.o_width;a(d.dom_element).css("font-size",100*e+"%"),a(d.dom_content_element).css("height",d.attrs.height*e+"px"),c(d,e)}),a(window).trigger("resize"))},render:function(a){this.dom_element=a('<div class="az-element az-layers '+this.get_el_classes()+'" style="'+this.attrs.style+'"><div id="'+this.id+'" class="az-ctnr"></div></div>'),this.dom_content_element=a(this.dom_element).find(".az-ctnr"),a(this.dom_content_element).css("width",this.attrs.width),a(this.dom_content_element).css("height",this.attrs.height),ca.baseclass.prototype.render.apply(this,arguments)}}),O("az_container",!0,da),f(da.prototype,{name:Drupal.t("Glazed Container"),icon:"et et-icon-download",description:Drupal.t("AJAX Load Fields"),category:Drupal.t("Layout"),params:[G({type:"container",heading:Drupal.t("Glazed Container"),param_name:"container",description:Drupal.t("Type and name used as identificator to save container on server."),value:"/"})].concat(da.prototype.params),show_settings_on_create:!0,is_container:!0,hidden:!window.glazed_online,controls_base_position:"top-left",saveable:!0,get_button:function(){return'<div class="well text-center text-overflow" data-az-element="'+this.base+'"><i class="'+this.icon+'"></i><div>'+this.name+'</div><div class="text-muted small">'+this.description+"</div></div>"},get_empty:function(){var b='<div class="az-empty"><div class="top well"><strong>  <h3 class="glazed-choose-layout">Choose a Layout</h3></strong><p class="lead">'+Drupal.t("Or add elements from the + button or sidebar.</p></div>")+'<div class="top-right well"><h1></h1> <span class="glyphicon glyphicon-save"></span>'+Drupal.t(" Don't forget to save frequently")+"</div></div>",c=a(b);return c.find(".glazed-choose-layout").bind("click",function(b){if(b.stopPropagation(),1==b.which){var c=a(this).closest("[data-az-id]").attr("data-az-id");qa.showTemplates(qa.get_element(c),function(a){})}}),c},show_controls:function(){if(window.glazed_editor){var b=this,d='<ul class="nav">';d+='<li><a href="https://www.youtube.com/watch?v=lODF-8byKRA" target="_blank">Basic Controls Video</a></li>',d+='<li><a href="http://www.sooperthemes.com/documentation" target="_blank">Documentation</a></li>',d+='<li><a href="http://www.sooperthemes.com/dashboard/tickets" target="_blank">Support Forum</a></li>',d+="</ul>",da.baseclass.prototype.show_controls.apply(this,arguments),null==this.parent&&(a('<span title="'+c("Toggle editor")+'" class="control toggle-editor btn btn-default glyphicon glyphicon-eye-open" > </span>').appendTo(this.controls).click(function(){return a(b.dom_element).toggleClass("glazed-editor"),!1}),a('<span role="button" tabindex="0" title="'+c("Documentation and Support")+'" class="control glazed-help btn btn-default glyphicon glyphicon-question-sign glazed-builder-popover"> </span>').appendTo(this.controls).popover({html:!0,placement:"left",content:function(){return d},title:function(){return"Support and Documentation"}}),this.controls.removeClass(ma+"btn-group-xs"),this.controls.find(".edit").remove(),this.controls.find(".copy").remove(),this.controls.find(".clone").remove(),this.controls.find(".remove").remove(),this.controls.find(".js-animation").remove(),this.controls.find(".drag-and-drop").attr("title",""),this.controls.find(".drag-and-drop").removeClass(ma+"glyphicon-move"),this.controls.find(".drag-and-drop").removeClass("drag-and-drop")),this.saveable&&a('<span title="'+c("Save container")+'" class="control save-container btn btn-success glyphicon glyphicon-save" > </span>').appendTo(this.controls).click({object:this},this.click_save_container)}},get_my_shortcode:function(){return this.get_children_shortcode()},get_hover_styles:function(a){var b="";""!=a.attrs.hover_style&&(b=a.get_hover_style());for(var c=0;c<a.children.length;c++)b+=this.get_hover_styles(a.children[c]);return b},get_js:function(a){var b="";for(var c in a.js)b+='<script src="'+c+'"><\/script>\n';return b},get_css:function(a){var b="";for(var c in a.css)b+='<link rel="stylesheet" type="text/css" href="'+c+'">\n';return b},get_loader:function(){function b(c){var d={};d[c.base]=!0;for(var e=0;e<c.children.length;e++){var f=b(c.children[e]);a.extend(d,f)}return d}function c(b){var d={};"an_start"in b.attrs&&""!=b.attrs.an_start&&(d.an_start=!0);for(var e=0;e<b.children.length;e++)a.extend(d,c(b.children[e]));return d}function d(a){if("an_start"in a.attrs&&""!=a.attrs.an_start)return animation=!0,!0;if(a.constructor.prototype.hasOwnProperty("showed")){var b=!0;switch(("is_cms_element"in a||"is_template_element"in a)&&(b=!1),a.base){case"az_container":null==a.parent&&(b=!1);break;case"az_section":""==a.attrs.effect&&(b=!1);break;case"az_row":"yes"!=a.attrs.equal&&(b=!1)}if(b)return!0}for(var c=0;c<a.children.length;c++)if(d(a.children[c]))return!0;return!1}var e=this,f=(b(e),c(e),""),g="";return g="glazed_development"in window?window.glazed_baseurl+"glazed_frontend.js":window.glazed_baseurl+"glazed_frontend.min.js",d(e)&&(f+='<script src="'+g+'"><\/script>\n'),f},get_html:function(){this.recursive_update_data(),this.recursive_clear_animation();var b=a("<div>"+a(this.dom_content_element).html()+"</div>");return this.recursive_restore(b),a(b).find(".az-element > .controls").remove(),a(b).find(".az-section > .add-section").remove(),a(b).find("> .controls").remove(),a(b).find(".az-sortable-controls").remove(),a(b).find(".az-empty").remove(),a(b).find(".ui-resizable-e").remove(),a(b).find(".ui-resizable-s").remove(),a(b).find(".ui-resizable-se").remove(),a(b).find(".az-text .ckeditor-inline").each(function(){var b=a(this),c=b.contents();b.replaceWith(c)}),a(b).find(".az-text").removeClass("cke_editable cke_editable_inline cke_contents_ltr cke_show_borders"),a(b).find(".init-colorbox-processed").removeClass("init-colorbox-processed"),a(b).find(".az-element--controls-center").removeClass("az-element--controls-center"),a(b).find(".az-element--controls-top-left").removeClass("az-element--controls-top-left"),a(b).find(".az-element--controls-spacer").removeClass("az-element--controls-spacer"),a(b).find(".editable-highlight").removeClass("editable-highlight"),a(b).find(".styleable-highlight").removeClass("styleable-highlight"),a(b).find(".sortable-highlight").removeClass("sortable-highlight"),a(b).find(".ui-draggable").removeClass("ui-draggable"),a(b).find(".ui-resizable").removeClass("ui-resizable"),a(b).find(".ui-sortable").removeClass("ui-sortable"),a(b).find(".az-element.az-container > .az-ctnr").empty(),a(b).find(".az-element.az-cms-element").empty(),a(b).find(".mbYTP_wrapper").remove(),a(b).html()},get_container_html:function(){return this.get_html()+this.get_css(this)+this.get_hover_styles(this)+this.get_js(this)+this.get_loader()},click_save_container:function(a){return a.data.object.save_container(),!1},save_container:function(){var a=this;glazed_add_js({path:"jsON-js/json2.min.js",loaded:"JSON"in window,callback:function(){var b=a.get_container_html();s(a.attrs.container.split("/")[0],a.attrs.container.split("/")[1],b)}})},load_container:function(){var b=this;window.loadedContainers=window.loadedContainers||{},window.loadedContainers[b.id]||(window.loadedContainers[b.id]=!0,""!=this.attrs.container&&t(this.attrs.container.split("/")[0],this.attrs.container.split("/")[1],function(c){if(/^\s*\<[\s\S]*\>\s*$/.exec(c)){b.loaded_container=b.attrs.container,a(c).appendTo(b.dom_content_element),a(b.dom_content_element).find("> script").detach().appendTo("head"),a(b.dom_content_element).find("> link[href]").detach().appendTo("head"),a(b.dom_element).css("display",""),a(b.dom_element).addClass("glazed"),b.parse_html(b.dom_content_element),a(b.dom_element).attr("data-az-id",b.id),b.html_content=!0;for(var d=0;d<b.children.length;d++)b.children[d].recursive_render();b.dom_content_element.empty(),window.glazed_editor&&(b.show_controls(),b.update_sortable()),b.parent.attach_children(),b.attach_children();for(var d=0;d<b.children.length;d++)b.children[d].recursive_showed();a(document).trigger("scroll")}else if(!la){b.loaded_container=b.attrs.container,b.parse_shortcode(c),a(b.dom_element).attr("data-az-id",b.id),window.glazed_editor&&(b.show_controls(),b.update_sortable());for(var d=0;d<b.children.length;d++)b.children[d].recursive_render();b.attach_children(),null!=b.parent&&b.parent.update_dom();for(var d=0;d<b.children.length;d++)b.children[d].recursive_showed();a(document).trigger("scroll")}qa.try_render_unknown_elements()}))},clone:function(){da.baseclass.prototype.clone.apply(this,arguments),this.rendered=!0},recursive_render:function(){la?(this.render(a),this.children=[]):da.baseclass.prototype.recursive_render.apply(this,arguments),window.glazed_editor&&(this.show_controls(),this.update_sortable())},update_dom:function(){this.loaded_container!=this.attrs.container&&(this.children=[],a(this.dom_content_element).empty(),this.rendered=!1,null!=this.parent&&da.baseclass.prototype.update_dom.apply(this,arguments))},showed:function(a){da.baseclass.prototype.showed.apply(this,arguments);var b=this;null==this.parent?b.rendered||(b.rendered=!0,b.load_container()):this.add_js({path:"vendor/jquery.waypoints/lib/jquery.waypoints.min.js",loaded:"waypoint"in a.fn,callback:function(){a(b.dom_element).waypoint(function(a){b.rendered||(b.rendered=!0,b.load_container())},{offset:"100%",handler:function(a){this.destroy()}}),a(document).trigger("scroll")}})},render:function(a){"/"!=this.attrs.container&&(this.dom_element=a('<div class="az-element az-container"><div class="az-ctnr"></div></div>'),this.dom_content_element=a(this.dom_element).find(".az-ctnr"),da.baseclass.prototype.render.apply(this,arguments))}}),L("az_unknown",!0,ea),f(ea.prototype,{has_content:!0,hidden:!0,render:function(a){if(this.dom_element=a('<div class = "az-element az-unknown">'+Drupal.t("Element Not Found.")+"</div>"),this.dom_content_element=this.dom_element,"content"in this.attrs){var b=/\[[^\]]*\]([^\[]*)\[\/[^\]]*\]/.exec(this.attrs.content);b&&a(this.dom_element).append(b[1])}ea.baseclass.prototype.render.apply(this,arguments)}}),fa(),ga(),ha(),ia();var Ba=function(){a("button.control.add:not(.attachOnLoadBinded-processed), button.control.edit:not(.attachOnLoadBinded-processed), .az-empty:not(.attachOnLoadBinded-processed), button.control.remove:not(.attachOnLoadBinded-processed), #az-thumbnails:not(.attachOnLoadBinded-processed)").once("attachOnLoadBinded",function(){a(this).bind("mousedown",function(){window.attachOnLoad=!0})})};a(window).on("load",function(){Ba(),a("button.control.save-container").once("attachOnLoad",function(){a(this).bind("click",function(){Ba(),window.attachOnLoad=!1})}),a("body").once("windowBeforeunload",function(){a(window).bind("beforeunload",function(){if(void 0!==window.attachOnLoad&&window.attachOnLoad)return" "})})}),Drupal.behaviors.CKinlineAttach={attach:function(){a(window).bind("CKinlineAttach",function(){function b(){CKEDITOR.on("instanceCreated",function(b){var c=b.editor;c.on("focus",function(){a(c.element.$).parents(".az-element").addClass("az-element--hide-controls")}),c.on("blur",function(){a(c.element.$).parents(".az-element").removeClass("az-element--hide-controls")})}),window.location.href.indexOf("/admin/")>0&&(CKEDITOR.disableAutoInline=!0),CKEDITOR.config.fillEmptyBlocks=!1,CKEDITOR.config.allowedContent=!0,CKEDITOR.config.autoParagraph=!1,CKEDITOR.config.contentsCss=["//cdn.jsdelivr.net/bootstrap/3.3.7/css/bootstrap.min.css"],void 0!==window.Drupal.settings.glazed&&void 0!==window.Drupal.settings.glazed.glazedPath.length&&CKEDITOR.config.contentsCss.push(Drupal.settings.basePath+window.Drupal.settings.glazed.glazedPath+"css/glazed.css"),CKEDITOR.config.stylesSet=[{name:"Lead",element:"p",attributes:{class:"lead"}},{name:"Muted",element:"p",attributes:{class:"text-muted"}},{name:"Highlighted",element:"mark"},{name:"Small",element:"small"},{name:"Button Primary",element:"div",attributes:{class:"btn btn-primary"}},{name:"Button Default",element:"div",attributes:{class:"btn btn-default"}}];var b=[];for(var c in window.sooperthemes_theme_palette)b.push(window.sooperthemes_theme_palette[c].substring(1));var d=b.join(",")+",";CKEDITOR.config.hasOwnProperty("colorButton_colors")&&CKEDITOR.config.colorButton_colors.indexOf(d)<0&&(CKEDITOR.config.colorButton_colors=d+CKEDITOR.config.colorButton_colors);var e=[{name:"basicstyles",items:["Bold","Italic","RemoveFormat"]},{name:"colors",items:["TextColor"]},{name:"styles",items:["Format","Styles","FontSize"]},{name:"paragraph",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","BulletedList","NumberedList"]},{name:"links",items:["Link","Unlink"]},{name:"insert",items:["Image","Table"]},{name:"clipboard",items:["Undo","Redo"]}];CKEDITOR.config.toolbar=e,CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;60/60px;72/72px;90/90px;117/117px;144/144px",CKEDITOR.config.protectedSource.push(/<link.*?>/gi),a("body").find(".glazed").each(function(){a(this).hasClass("glazed-editor")&&a(this).find(".az-element.az-text, .az-element.az-blockquote").each(function(){var b=a(this);if(!b.find(".ckeditor-inline").length){$controls=b.find(".controls").appendTo("body"),b.wrapInner("<div class='ckeditor-inline' contenteditable='true' />"),b.prepend($controls);var c=b.find(".ckeditor-inline")[0];void 0!==c&&a(c).bind("click",function(b){CKEDITOR.config.toolbar=e,0==a(c).hasClass("cke_focus")&&CKEDITOR.inline(c),a(this).off(b)})}}),a(this).find(".ckeditor-inline").bind("click",function(){window.attachOnLoad=!0})})}"CKEDITOR"in window?b():glazed_add_js({path:"vendor/ckeditor/ckeditor.js",callback:function(){_.isObject(CKEDITOR)&&b()}})}).trigger("CKinlineAttach"),a("button.control.save-container").on("click",function(){window.attachOnLoad=!1,a(window).trigger("CKinlineAttach")}),a(".controls .control.toggle-editor").bind("click",function(){a(".wrap-containers .glazed").each(function(){var b=a(this);if(b.hasClass("glazed-editor"))b.find(".az-element.az-text .ckeditor-inline, .az-element.az-blockquote .ckeditor-inline").each(function(){var b=a(this);b.attr("contenteditable",!0);var c=b[0];void 0!==c&&a(c).bind("click",function(b){CKEDITOR.inline(c),a(this).off(b)})});else{a(this).find(".az-element.az-text .ckeditor-inline, .az-element.az-blockquote .ckeditor-inline").each(function(){var b=a(this);b.attr("contenteditable",!1),b.off("click")});for(var c in CKEDITOR.instances)CKEDITOR.instances[c].destroy()}})}),a(document).on("click",function(b){a(b.target).is(".glazed-builder-popover")||a(".glazed-builder-popover").popover("hide")})}}}(window.jQuery);